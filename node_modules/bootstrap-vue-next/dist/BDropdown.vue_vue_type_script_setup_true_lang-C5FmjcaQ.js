"use strict";const e=require("vue"),t=require("./floatingUi-CoKQ-nw7.js"),o=require("./index-CnY1um_J.js"),a=require("./useDefaults-C2groUjC.js"),l=require("./useId-D-t4Y3Sk.js"),r=require("./classes-CXBJXuVd.js"),n=require("./BButton.vue_vue_type_script_setup_true_lang-sjMGFjGE.js"),d=require("./ConditionalWrapper.vue_vue_type_script_lang-BClbTb87.js"),i=require("./ConditionalTeleport.vue_vue_type_script_lang-nP1ZUfLS.js"),u=require("./keys-Dkmt9nlW.js"),s=require("./index-BInTFWT4.js"),p={class:"visually-hidden"},f=["aria-labelledby","role"],v=e.defineComponent({__name:"BDropdown",props:e.mergeModels({ariaLabel:{default:void 0},autoClose:{type:[Boolean,String],default:!0},boundary:{default:"clippingAncestors"},boundaryPadding:{default:void 0},center:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},dropend:{type:Boolean,default:!1},dropstart:{type:Boolean,default:!1},dropup:{type:Boolean,default:!1},end:{type:Boolean,default:!1},floatingMiddleware:{default:void 0},id:{default:void 0},isNav:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},menuClass:{default:void 0},noCaret:{type:Boolean,default:!1},noFlip:{type:Boolean,default:!1},noShift:{type:Boolean,default:!1},noSize:{type:Boolean,default:!1},offset:{default:0},role:{default:"menu"},size:{default:"md"},skipWrapper:{type:Boolean,default:!1},split:{type:Boolean,default:!1},splitButtonType:{default:"button"},splitClass:{default:void 0},splitDisabled:{type:Boolean,default:void 0},splitHref:{default:void 0},splitTo:{default:void 0},splitVariant:{default:void 0},strategy:{default:"absolute"},text:{default:void 0},toggleClass:{default:void 0},toggleText:{default:"Toggle dropdown"},variant:{default:"secondary"},wrapperClass:{default:void 0},teleportDisabled:{type:Boolean,default:!1},teleportTo:{default:void 0}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:e.mergeModels(["click","hidden","hide","hide-prevented","show","show-prevented","shown","toggle"],["update:modelValue"]),setup(v,{expose:c,emit:y}){const g=v,m=a.useDefaults(g,"BDropdown"),w=y,h=l.useId((()=>m.id),"dropdown"),b=e.useModel(v,"modelValue"),B=e.inject(u.inputGroupKey,!1),C=e.computed((()=>"string"==typeof m.offset||"number"==typeof m.offset?m.offset:NaN)),_=s.useToNumber(C),k=e.ref(null),x=e.ref(null),S=e.ref(null),z=e.ref(null),T=e.computed((()=>t.isBoundary(m.boundary)?m.boundary:void 0)),N=e.computed((()=>t.isRootBoundary(m.boundary)?m.boundary:void 0)),D=e.computed((()=>m.split?x.value:S.value));o.onKeyStroke("Escape",(()=>{b.value=!b.value}),{target:D}),o.onKeyStroke("Escape",(()=>{b.value=!b.value}),{target:k});const q=(t,o)=>{var a,l,r,n,d,i,u;if(null==(l=k.value)?void 0:l.contains(null==(a=t.target)?void 0:a.closest("form")))return;if(/input|select|option|textarea|form/i.test(null==(r=t.target)?void 0:r.tagName))return;if(t.preventDefault(),!b.value)return open(),void e.nextTick((()=>q(t,o)));const s=null==(n=k.value)?void 0:n.querySelectorAll(".dropdown-item:not(.disabled):not(:disabled)");if(s)if(null==(d=k.value)?void 0:d.contains(document.activeElement)){const e=k.value.querySelector(".dropdown-item:focus"),t=Array.prototype.indexOf.call(s,e)+o;t>=0&&t<(null==s?void 0:s.length)&&(null==(i=s[t])||i.focus())}else null==(u=s[-1===o?s.length-1:0])||u.focus()};o.onKeyStroke("ArrowUp",(e=>q(e,-1)),{target:D}),o.onKeyStroke("ArrowDown",(e=>q(e,1)),{target:D}),o.onKeyStroke("ArrowUp",(e=>q(e,-1)),{target:k}),o.onKeyStroke("ArrowDown",(e=>q(e,1)),{target:k});const V=e.computed((()=>t.resolveFloatingPlacement({top:m.dropup,start:m.dropstart,end:m.dropend,alignCenter:m.center,alignEnd:m.end}))),j=e.ref({}),E=e.computed((()=>{if(void 0!==m.floatingMiddleware)return m.floatingMiddleware;const e="string"==typeof m.offset||"number"==typeof m.offset?_.value:m.offset,o=[t.offset(e)];return!1===m.noFlip&&o.push(t.flip({boundary:T.value,rootBoundary:N.value,padding:m.boundaryPadding})),!1===m.noShift&&o.push(t.shift({boundary:T.value,rootBoundary:N.value,padding:m.boundaryPadding})),!1===m.noSize&&o.push(t.size({boundary:T.value,rootBoundary:N.value,padding:m.boundaryPadding,apply({availableWidth:e,availableHeight:t}){j.value={maxHeight:t&&b.value?`${t}px`:void 0,maxWidth:e&&b.value?`${e}px`:void 0}}})),o})),{update:A,floatingStyles:K}=t.useFloating(D,k,{placement:V,middleware:E,strategy:e.toRef((()=>m.strategy)),whileElementsMounted:t.z}),M=e.computed((()=>[m.wrapperClass,{"btn-group":!m.wrapperClass&&m.split,dropdown:!m.wrapperClass&&!m.split,dropup:m.dropup,dropend:m.dropend,dropstart:m.dropstart,"position-static":"clippingAncestors"!==m.boundary&&!m.isNav}])),P=e.computed((()=>[m.split?m.splitClass:m.toggleClass,{"nav-link":m.isNav,"dropdown-toggle":!m.split,"dropdown-toggle-no-caret":m.noCaret&&!m.split,show:m.split?void 0:b.value}])),W=()=>{I()},H=e=>{m.split?w("click",e):W()};o.onClickOutside(k,(()=>{!b.value||!0!==m.autoClose&&"outside"!==m.autoClose||I()}),{ignore:[x,S]});const $=()=>{!b.value||!0!==m.autoClose&&"inside"!==m.autoClose||I()},F=()=>{b.value&&I()},R=()=>{b.value||I()},I=()=>{var e,t;w("toggle");const o=b.value,a=new r.BvTriggerableEvent(o?"hide":"show");w(o?"hide":"show",a),a.defaultPrevented?w(o?"hide-prevented":"show-prevented"):(b.value=!o,w(o?"hidden":"shown"),null==(t=null==(e=z.value)?void 0:e.dispatchEvent)||t.call(e,new Event("forceHide")))};return e.watch(b,(()=>{A()})),c({hide:F,show:R,toggle:I}),e.provide(u.dropdownInjectionKey,{id:h,show:R,hide:F,toggle:I,visible:e.toRef((()=>b.value)),isNav:e.toRef((()=>m.isNav))}),(t,o)=>(e.openBlock(),e.createBlock(d._sfc_main,{ref_key:"wrapper",ref:z,skip:e.unref(B)||e.unref(m).skipWrapper,class:e.normalizeClass(M.value)},{default:e.withCtx((()=>[e.createVNode(n._sfc_main,{id:e.unref(h),ref_key:"splitButton",ref:S,variant:e.unref(m).splitVariant||e.unref(m).variant,size:e.unref(m).size,class:e.normalizeClass(P.value),disabled:e.unref(m).splitDisabled||e.unref(m).disabled,type:e.unref(m).splitButtonType,"aria-label":e.unref(m).ariaLabel,"aria-expanded":e.unref(m).split?void 0:b.value,"aria-haspopup":e.unref(m).split?void 0:"menu",href:e.unref(m).split?e.unref(m).splitHref:void 0,to:e.unref(m).split&&e.unref(m).splitTo?e.unref(m).splitTo:void 0,onClick:H},{default:e.withCtx((()=>[e.renderSlot(t.$slots,"button-content",{},(()=>[e.createTextVNode(e.toDisplayString(e.unref(m).text),1)]))])),_:3},8,["id","variant","size","class","disabled","type","aria-label","aria-expanded","aria-haspopup","href","to"]),e.unref(m).split?(e.openBlock(),e.createBlock(n._sfc_main,{key:0,ref_key:"button",ref:x,variant:e.unref(m).variant,size:e.unref(m).size,disabled:e.unref(m).disabled,class:e.normalizeClass([[e.unref(m).toggleClass,{show:b.value}],"dropdown-toggle-split dropdown-toggle"]),"aria-expanded":b.value,"aria-haspopup":"menu",onClick:W},{default:e.withCtx((()=>[e.createElementVNode("span",p,[e.renderSlot(t.$slots,"toggle-text",{},(()=>[e.createTextVNode(e.toDisplayString(e.unref(m).toggleText),1)]))])])),_:3},8,["variant","size","disabled","class","aria-expanded"])):e.createCommentVNode("",!0),e.createVNode(i._sfc_main,{to:e.unref(m).teleportTo,disabled:!e.unref(m).teleportTo||e.unref(m).teleportDisabled},{default:e.withCtx((()=>[!e.unref(m).lazy||b.value?e.withDirectives((e.openBlock(),e.createElementBlock("ul",{key:0,ref_key:"floating",ref:k,style:e.normalizeStyle([e.unref(K),j.value]),class:e.normalizeClass(["dropdown-menu overflow-auto",[e.unref(m).menuClass,{show:b.value}]]),"aria-labelledby":e.unref(h),role:e.unref(m).role,onClick:$},[e.renderSlot(t.$slots,"default",{hide:F,show:R})],14,f)),[[e.vShow,e.unref(m).lazy||b.value]]):e.createCommentVNode("",!0)])),_:3},8,["to","disabled"])])),_:3},8,["skip","class"]))}});exports._sfc_main=v;
//# sourceMappingURL=BDropdown.vue_vue_type_script_setup_true_lang-C5FmjcaQ.js.map
