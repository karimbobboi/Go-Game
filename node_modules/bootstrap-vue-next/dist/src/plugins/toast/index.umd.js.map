{"version":3,"file":"index.umd.js","sources":["../../../../src/plugins/toast/index.ts"],"sourcesContent":["import {markRaw, type Plugin, ref, toRef, watch} from 'vue'\nimport {toastPluginKey} from '../../utils/keys'\nimport type {ContainerPosition} from '../../types/Alignment'\nimport type {\n  ToastOrchestratorArrayValue,\n  ToastOrchestratorShowParam,\n} from '../../types/ComponentOrchestratorTypes'\n\nconst posDefault: ContainerPosition = 'top-end'\n\nexport const toastPlugin: Plugin = {\n  install(app) {\n    const toasts = ref<ToastOrchestratorArrayValue[]>([])\n\n    const _isAppend = ref(false)\n\n    const _setIsAppend = (value: boolean) => {\n      _isAppend.value = value\n    }\n\n    /**\n     * @returns {symbol} A symbol that corresponds to its unique id. You can pass this id to the hide function to force a Toast to hide\n     */\n    const show = (obj: ToastOrchestratorShowParam = {}): symbol => {\n      const resolvedProps = toRef(obj.props)\n\n      const _self = Symbol()\n\n      const toastToAdd: ToastOrchestratorArrayValue = {\n        component: !obj.component ? undefined : markRaw(obj.component),\n        props: {\n          ...resolvedProps.value,\n          pos: resolvedProps.value?.pos || posDefault,\n          _modelValue: resolvedProps.value?.value || 5000,\n          _self,\n        },\n      }\n\n      if (\n        resolvedProps.value?.appendToast !== undefined\n          ? resolvedProps.value.appendToast\n          : _isAppend.value\n      ) {\n        toasts.value.push(toastToAdd)\n      } else {\n        toasts.value.unshift(toastToAdd)\n      }\n\n      watch(resolvedProps, (newValue) => {\n        const previousIndex = toasts.value.findIndex((el) => el.props._self === _self)\n        if (previousIndex === -1) return\n        toasts.value.splice(previousIndex, 1, {\n          component: !obj.component ? undefined : markRaw(obj.component),\n          props: {\n            ...toasts.value[previousIndex].props,\n            ...newValue,\n            _modelValue: newValue?.value || toasts.value[previousIndex].props._modelValue || 5000,\n          },\n        })\n      })\n\n      return _self\n    }\n\n    /**\n     * You can get the symbol param from the return value from the show method\n     */\n    const remove = (self: symbol) => {\n      toasts.value = toasts.value.filter((el) => el.props._self !== self)\n    }\n\n    const leave = (self: symbol) => {\n      const toastIndex = toasts.value.findIndex((el) => el.props._self === self)\n      if (toastIndex === -1) return\n      toasts.value.splice(toastIndex, 1, {\n        component: !toasts.value[toastIndex].component\n          ? undefined\n          : markRaw(toasts.value[toastIndex].component as object),\n        props: {\n          ...toasts.value[toastIndex].props,\n          _modelValue: false,\n        },\n      })\n    }\n\n    app.provide(toastPluginKey, {\n      _setIsAppend,\n      toasts,\n      show,\n      remove,\n      leave,\n    })\n  },\n}\n"],"names":["toastPlugin","install","app","toasts","ref","_isAppend","provide","toastPluginKey","_setIsAppend","value","show","obj","resolvedProps","toRef","props","_self","Symbol","toastToAdd","component","markRaw","pos","_a","_modelValue","_b","_c","appendToast","push","unshift","newValue","previousIndex","findIndex","el","splice","remove","self","filter","leave","toastIndex"],"mappings":"8IAUaA,EAAsB,CACjC,OAAAC,CAAQC,GACA,MAAAC,EAASC,MAAmC,IAE5CC,EAAYD,OAAI,GAuElBF,EAAAI,QAAQC,iBAAgB,CAC1BC,aAtEoBC,IACpBJ,EAAUI,MAAQA,CAAA,EAsElBN,SACAO,KAjEW,CAACC,EAAkC,gBACxC,MAAAC,EAAgBC,EAAAA,MAAMF,EAAIG,OAE1BC,EAAQC,SAERC,EAA0C,CAC9CC,UAAYP,EAAIO,UAAwBC,EAAAA,QAAQR,EAAIO,gBAAxB,EAC5BJ,MAAO,IACFF,EAAcH,MACjBW,KAAK,OAAAC,EAAAT,EAAcH,YAAd,EAAAY,EAAqBD,MAxBE,UAyB5BE,aAAa,OAAAC,EAAAX,EAAcH,YAAd,EAAAc,EAAqBd,QAAS,IAC3CM,UA2BG,YAtBgC,KAArC,OAAAS,EAAAZ,EAAcH,YAAO,EAAAe,EAAAC,aACjBb,EAAcH,MAAMgB,YACpBpB,EAAUI,OAEPN,EAAAM,MAAMiB,KAAKT,GAEXd,EAAAM,MAAMkB,QAAQV,WAGjBL,GAAgBgB,IACd,MAAAC,EAAgB1B,EAAOM,MAAMqB,WAAWC,GAAOA,EAAGjB,MAAMC,QAAUA,KAC9C,IAAtBc,GACG1B,EAAAM,MAAMuB,OAAOH,EAAe,EAAG,CACpCX,UAAYP,EAAIO,UAAwBC,EAAAA,QAAQR,EAAIO,gBAAxB,EAC5BJ,MAAO,IACFX,EAAOM,MAAMoB,GAAef,SAC5Bc,EACHN,mBAAaM,WAAUnB,QAASN,EAAOM,MAAMoB,GAAef,MAAMQ,aAAe,MAEpF,IAGIP,CAAA,EA4BPkB,OAtBcC,IACP/B,EAAAM,MAAQN,EAAOM,MAAM0B,QAAQJ,GAAOA,EAAGjB,MAAMC,QAAUmB,GAAI,EAsBlEE,MAnBaF,IACP,MAAAG,EAAalC,EAAOM,MAAMqB,WAAWC,GAAOA,EAAGjB,MAAMC,QAAUmB,KAC9C,IAAnBG,GACGlC,EAAAM,MAAMuB,OAAOK,EAAY,EAAG,CACjCnB,UAAYf,EAAOM,MAAM4B,GAAYnB,UAEjCC,EAAQA,QAAAhB,EAAOM,MAAM4B,GAAYnB,gBADjC,EAEJJ,MAAO,IACFX,EAAOM,MAAM4B,GAAYvB,MAC5BQ,aAAa,IAEhB,GAUL"}