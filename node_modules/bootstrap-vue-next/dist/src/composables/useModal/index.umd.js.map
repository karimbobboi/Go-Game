{"version":3,"file":"index.umd.js","sources":["../../../../src/composables/useModal/index.ts"],"sourcesContent":["import {\n  type ComponentInternalInstance,\n  computed,\n  getCurrentInstance,\n  type MaybeRefOrGetter,\n  toValue,\n} from 'vue'\nimport {useSharedModalStack} from '../useModalManager'\n\nexport const useModal = (id: MaybeRefOrGetter<string | undefined> = undefined) => {\n  const {registry} = useSharedModalStack()\n  const instance = getCurrentInstance()\n\n  const findBModal = (component: ComponentInternalInstance): ComponentInternalInstance | null => {\n    if (!component.parent) {\n      return null\n    }\n\n    if (component.parent.type.__name === 'BModal') {\n      return component.parent\n    }\n\n    return findBModal(component.parent)\n  }\n\n  const modalComponent = computed(() => {\n    const resolvedId = toValue(id)\n\n    if (resolvedId) {\n      if (!registry) return null\n      for (const [, modal] of registry.value) {\n        if (modal.exposed?.id.value === resolvedId) {\n          return modal\n        }\n      }\n\n      return null\n    }\n\n    if (!instance) {\n      return null\n    }\n\n    return findBModal(instance)\n  })\n\n  const modal = computed(() => modalComponent.value?.proxy)\n\n  return {\n    show() {\n      modalComponent.value?.exposed?.show()\n    },\n    hide(trigger = '') {\n      modalComponent.value?.exposed?.hide(trigger)\n    },\n    modal,\n  }\n}\n"],"names":["id","registry","useSharedModalStack","instance","getCurrentInstance","findBModal","component","parent","type","__name","modalComponent","computed","resolvedId","toValue","modal","value","modal2","exposed","_a","proxy","show","_b","hide","trigger"],"mappings":"0KASwB,CAACA,OAA2C,KAC5D,MAAAC,SAACA,GAAYC,EAAAA,sBACbC,EAAWC,EAAAA,qBAEXC,EAAcC,GACbA,EAAUC,OAIsB,WAAjCD,EAAUC,OAAOC,KAAKC,OACjBH,EAAUC,OAGZF,EAAWC,EAAUC,QAPnB,KAULG,EAAiBC,EAAAA,UAAS,WACxB,MAAAC,EAAaC,UAAQb,GAE3B,GAAIY,EAAY,CACV,IAACX,EAAiB,OAAA,KACtB,IAAA,MAAca,CAAAA,KAAUb,EAASc,MAC/B,IAAID,OAAAA,EAAME,EAAAC,cAAS,EAAAC,EAAAlB,GAAGe,SAAUH,EACvBE,OAAAA,EAIJ,OAAA,IACT,CAEA,OAAKX,EAIEE,EAAWF,GAHT,IAGiB,IAGtBW,EAAQH,EAAAA,UAAS,WAAM,OAAA,OAAAO,EAAAR,EAAeK,YAAO,EAAAG,EAAAC,KAAA,IAE5C,MAAA,CACL,IAAAC,WACiB,OAAAC,EAAA,OAAAH,EAAAR,EAAAK,YAAO,EAAAG,EAAAD,UAASI,EAAAD,MACjC,EACA,IAAAE,CAAKC,EAAU,YACE,OAAAF,EAAA,OAAAH,EAAAR,EAAAK,YAAA,EAAAG,EAAOD,UAAPI,EAAgBC,KAAKC,EACtC,EACAT,QAAA"}