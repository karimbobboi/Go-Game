{"version":3,"file":"index.mjs","sources":["../../../../src/composables/useModal/index.ts"],"sourcesContent":["import {\n  type ComponentInternalInstance,\n  computed,\n  getCurrentInstance,\n  type MaybeRefOrGetter,\n  toValue,\n} from 'vue'\nimport {useSharedModalStack} from '../useModalManager'\n\nexport const useModal = (id: MaybeRefOrGetter<string | undefined> = undefined) => {\n  const {registry} = useSharedModalStack()\n  const instance = getCurrentInstance()\n\n  const findBModal = (component: ComponentInternalInstance): ComponentInternalInstance | null => {\n    if (!component.parent) {\n      return null\n    }\n\n    if (component.parent.type.__name === 'BModal') {\n      return component.parent\n    }\n\n    return findBModal(component.parent)\n  }\n\n  const modalComponent = computed(() => {\n    const resolvedId = toValue(id)\n\n    if (resolvedId) {\n      if (!registry) return null\n      for (const [, modal] of registry.value) {\n        if (modal.exposed?.id.value === resolvedId) {\n          return modal\n        }\n      }\n\n      return null\n    }\n\n    if (!instance) {\n      return null\n    }\n\n    return findBModal(instance)\n  })\n\n  const modal = computed(() => modalComponent.value?.proxy)\n\n  return {\n    show() {\n      modalComponent.value?.exposed?.show()\n    },\n    hide(trigger = '') {\n      modalComponent.value?.exposed?.hide(trigger)\n    },\n    modal,\n  }\n}\n"],"names":["modal"],"mappings":";;AASa,MAAA,WAAW,CAAC,KAA2C,WAAc;AAC1E,QAAA,EAAC,aAAY;AACnB,QAAM,WAAW;AAEX,QAAA,aAAa,CAAC,cAA2E;AACzF,QAAA,CAAC,UAAU,QAAQ;AACd,aAAA;AAAA,IACT;AAEA,QAAI,UAAU,OAAO,KAAK,WAAW,UAAU;AAC7C,aAAO,UAAU;AAAA,IACnB;AAEO,WAAA,WAAW,UAAU,MAAM;AAAA,EAAA;AAG9B,QAAA,iBAAiB,SAAS,MAAM;;AAC9B,UAAA,aAAa,QAAQ,EAAE;AAE7B,QAAI,YAAY;AACV,UAAA,CAAC,SAAiB,QAAA;AACtB,iBAAW,CAAGA,EAAAA,MAAK,KAAK,SAAS,OAAO;AACtC,cAAIA,YAAM,YAANA,mBAAe,GAAG,WAAU,YAAY;AACnCA,iBAAAA;AAAAA,QACT;AAAA,MACF;AAEO,aAAA;AAAA,IACT;AAEA,QAAI,CAAC,UAAU;AACN,aAAA;AAAA,IACT;AAEA,WAAO,WAAW,QAAQ;AAAA,EAAA,CAC3B;AAED,QAAM,QAAQ,SAAS,MAAA;;AAAM,gCAAe,UAAf,mBAAsB;AAAA,GAAK;AAEjD,SAAA;AAAA,IACL,OAAO;;AACU,iCAAA,UAAA,mBAAO,YAAP,mBAAgB;AAAA,IACjC;AAAA,IACA,KAAK,UAAU,IAAI;;AACF,iCAAA,UAAA,mBAAO,YAAP,mBAAgB,KAAK;AAAA,IACtC;AAAA,IACA;AAAA,EAAA;AAEJ;"}