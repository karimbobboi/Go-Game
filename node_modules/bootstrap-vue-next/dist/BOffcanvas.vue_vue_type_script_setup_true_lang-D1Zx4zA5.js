"use strict";const e=require("vue"),a=require("./index-CnY1um_J.js"),o=require("./useSafeScrollLock-DoX-OOqc.js"),l=require("./useDefaults-C2groUjC.js"),t=require("./useId-D-t4Y3Sk.js"),s=require("./classes-CXBJXuVd.js"),r=require("./BButton.vue_vue_type_script_setup_true_lang-sjMGFjGE.js"),n=require("./BCloseButton.vue_vue_type_script_setup_true_lang-CRwsufrO.js"),d=require("./ConditionalTeleport.vue_vue_type_script_lang-nP1ZUfLS.js"),u=require("./dom-C-F8jHop.js"),c=["id","aria-labelledby"],i=["id"],v="offcanvas-fallback-focus",f=e.defineComponent({inheritAttrs:!1,__name:"BOffcanvas",props:e.mergeModels({hideBackdrop:{type:Boolean,default:!1},bodyAttrs:{default:void 0},bodyClass:{default:void 0},bodyScrolling:{type:Boolean,default:!1},footerClass:{default:void 0},headerClass:{default:void 0},headerCloseClass:{default:void 0},headerCloseLabel:{default:"Close"},headerCloseVariant:{default:"secondary"},id:{default:void 0},lazy:{type:Boolean,default:!1},noCloseOnBackdrop:{type:Boolean,default:!1},noCloseOnEsc:{type:Boolean,default:!1},noFocus:{type:Boolean,default:!1},noHeader:{type:Boolean,default:!1},noTrap:{type:Boolean,default:!1},noHeaderClose:{type:Boolean,default:!1},placement:{default:"start"},shadow:{type:[String,Boolean],default:!1},title:{default:void 0},responsive:{},width:{default:void 0},teleportDisabled:{type:Boolean,default:!1},teleportTo:{default:"body"}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:e.mergeModels(["close","esc","hidden","hide","hide-prevented","show","show-prevented","shown"],["update:modelValue"]),setup(f,{expose:p,emit:m}){const h=f,k=l.useDefaults(h,"BOffcanvas"),y=m,C=e.useSlots(),B=e.useModel(f,"modelValue"),b=t.useId((()=>k.id),"offcanvas"),g=a.useBreakpoints(a.breakpointsBootstrapV5),w=g.greaterOrEqual((()=>k.responsive??"xs")),_=g.smallerOrEqual((()=>k.responsive??"xs")),E=e.computed((()=>void 0!==k.responsive&&w.value));o.useSafeScrollLock(B,(()=>k.bodyScrolling||E.value));const S=e.ref(null),V=e.ref(null);a.onKeyStroke("Escape",(()=>{I("esc")}),{target:S});const{focused:P}=a.useFocus(S,{initialValue:B.value&&!1===k.noFocus}),T=e.ref(B.value),{needsFallback:x}=o.useActivatedFocusTrap({element:S,isActive:T,noTrap:()=>k.noTrap||E.value,fallbackFocus:{classSelector:v,ref:V}}),z=e.ref(!1),q=e.ref(!1),F=e.computed((()=>(void 0===k.responsive||!E.value)&&!1===k.hideBackdrop&&!0===B.value)),N=e.computed((()=>!1===k.lazy||!0===k.lazy&&!0===z.value||!0===k.lazy&&!0===B.value)),$=e.computed((()=>!u.isEmptySlot(C["header-close"]))),j=e.computed((()=>[{"text-reset":!$.value},k.headerCloseClass])),O=e.computed((()=>({variant:$.value?k.headerCloseVariant:void 0,class:j.value}))),A=e.computed((()=>!0===q.value?null:{enterToClass:"showing",enterFromClass:"",leaveToClass:"hiding show",leaveFromClass:"show"})),L=e.computed((()=>!u.isEmptySlot(C.footer))),D=e.computed((()=>[void 0===k.responsive?"offcanvas":`offcanvas-${k.responsive}`,`offcanvas-${k.placement}`,{show:B.value&&!0===T.value,[`shadow-${k.shadow}`]:!!k.shadow}])),H=e.computed((()=>({width:k.width}))),M=e.computed((()=>({visible:B.value,placement:k.placement,hide:I}))),R=(e,a={})=>new s.BvTriggerableEvent(e,{cancelable:!1,target:S.value||null,relatedTarget:null,trigger:null,...a,componentId:b.value}),I=(e="")=>{if("backdrop"===e&&k.noCloseOnBackdrop||"esc"===e&&k.noCloseOnEsc)return void y("hide-prevented");const a=R("hide",{cancelable:""!==e,trigger:e});"close"===e&&y(e,a),"esc"===e&&y(e,a),y("hide",a),a.defaultPrevented?y("hide-prevented"):B.value=!1},K=()=>{const e=R("show",{cancelable:!0});if(y("show",e),e.defaultPrevented)return B.value=!1,void y("show-prevented");B.value=!0},X=()=>K(),G=()=>{T.value=!0,e.nextTick((()=>{!1===k.noFocus&&(P.value=!0)})),y("shown",R("shown")),!0===k.lazy&&(z.value=!0)},J=()=>{q.value=!1,T.value=!1},Q=()=>{y("hidden",R("hidden")),!0===k.lazy&&(z.value=!1)};return a.useEventListener(S,"bv-toggle",(()=>{B.value?I():K()})),e.watch(w,(e=>{void 0!==k.responsive&&(B.value=e)})),e.watch(_,(e=>{void 0===k.responsive&&!0===e||(q.value=!0)})),p({hide:I,show:K}),(a,o)=>(e.openBlock(),e.createBlock(d._sfc_main,{to:e.unref(k).teleportTo,disabled:e.unref(k).teleportDisabled||E.value},{default:e.withCtx((()=>[e.createVNode(e.Transition,e.mergeProps(A.value,{onBeforeEnter:X,onAfterEnter:G,onLeave:J,onAfterLeave:Q}),{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("div",e.mergeProps({id:e.unref(b),ref_key:"element",ref:S,"aria-modal":"true",role:"dialog",class:D.value,style:H.value,tabindex:"-1","aria-labelledby":`${e.unref(b)}-offcanvas-label`,"data-bs-backdrop":"false"},a.$attrs),[N.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.unref(k).noHeader?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["offcanvas-header",e.unref(k).headerClass])},[e.renderSlot(a.$slots,"header",e.normalizeProps(e.guardReactiveProps(M.value)),(()=>[e.createElementVNode("h5",{id:`${e.unref(b)}-offcanvas-label`,class:"offcanvas-title"},[e.renderSlot(a.$slots,"title",e.normalizeProps(e.guardReactiveProps(M.value)),(()=>[e.createTextVNode(e.toDisplayString(e.unref(k).title),1)]))],8,i),e.unref(k).noHeaderClose?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[$.value?(e.openBlock(),e.createBlock(r._sfc_main,e.mergeProps({key:0},O.value,{onClick:o[0]||(o[0]=e=>I("close"))}),{default:e.withCtx((()=>[e.renderSlot(a.$slots,"header-close")])),_:3},16)):(e.openBlock(),e.createBlock(n._sfc_main,e.mergeProps({key:1,"aria-label":e.unref(k).headerCloseLabel},O.value,{onClick:o[1]||(o[1]=e=>I("close"))}),null,16,["aria-label"]))],64))]))],2)),e.createElementVNode("div",e.mergeProps({class:["offcanvas-body",e.unref(k).bodyClass]},e.unref(k).bodyAttrs),[e.renderSlot(a.$slots,"default",e.normalizeProps(e.guardReactiveProps(M.value)))],16),L.value?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(e.unref(k).footerClass)},[e.renderSlot(a.$slots,"footer",e.normalizeProps(e.guardReactiveProps(M.value)))],2)):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0),e.unref(x)?(e.openBlock(),e.createElementBlock("div",{key:1,ref_key:"fallbackFocusElement",ref:V,class:e.normalizeClass(v),tabindex:"0",style:{width:"0",height:"0",overflow:"hidden"}},null,512)):e.createCommentVNode("",!0)],16,c),[[e.vShow,B.value||E.value]])])),_:3},16),F.value?e.renderSlot(a.$slots,"backdrop",{key:0},(()=>[e.createElementVNode("div",{class:"offcanvas-backdrop fade show",onClick:o[2]||(o[2]=e=>I("backdrop"))})])):e.createCommentVNode("",!0)])),_:3},8,["to","disabled"]))}});exports._sfc_main=f;
//# sourceMappingURL=BOffcanvas.vue_vue_type_script_setup_true_lang-D1Zx4zA5.js.map
