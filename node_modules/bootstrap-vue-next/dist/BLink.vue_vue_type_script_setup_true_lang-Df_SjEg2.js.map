{"version":3,"file":"BLink.vue_vue_type_script_setup_true_lang-Df_SjEg2.js","sources":["../src/composables/useLinkClasses.ts","../src/components/BLink/BLink.vue"],"sourcesContent":["import {computed, type MaybeRefOrGetter, toValue} from 'vue'\nimport type {\n  LinkIconProps,\n  LinkOpacityProps,\n  LinkUnderlineProps,\n  LinkVariantProps,\n} from '../types/ComponentProps'\n\nexport const useLinkClasses = (\n  linkProps: MaybeRefOrGetter<\n    LinkUnderlineProps & LinkOpacityProps & LinkIconProps & LinkVariantProps\n  >\n) =>\n  computed(() => {\n    const props = toValue(linkProps)\n    return {\n      [`link-${props.variant}`]: props.variant !== null,\n      [`link-opacity-${props.opacity}`]: props.opacity !== undefined,\n      [`link-opacity-${props.opacityHover}-hover`]: props.opacityHover !== undefined,\n      [`link-underline-${props.underlineVariant}`]: props.underlineVariant !== null,\n      [`link-offset-${props.underlineOffset}`]: props.underlineOffset !== undefined,\n      [`link-offset-${props.underlineOffsetHover}-hover`]: props.underlineOffsetHover !== undefined,\n      ['link-underline']:\n        props.underlineVariant === null &&\n        (props.underlineOpacity !== undefined || props.underlineOpacityHover !== undefined),\n      [`link-underline-opacity-${props.underlineOpacity}`]: props.underlineOpacity !== undefined,\n      [`link-underline-opacity-${props.underlineOpacityHover}-hover`]:\n        props.underlineOpacityHover !== undefined,\n      'icon-link': props.icon === true,\n    }\n  })\n","<template>\n  <component\n    :is=\"tag\"\n    v-if=\"tag === 'router-link'\"\n    v-slot=\"//@ts-ignore \n    {href: localHref, navigate, isActive, isExactActive}\"\n    v-bind=\"routerAttr\"\n    custom\n  >\n    <component\n      :is=\"props.routerTag\"\n      :href=\"localHref\"\n      :target=\"props.target\"\n      :class=\"{\n        [defaultActiveClass]: props.active,\n        [props.activeClass]: isActive,\n        [props.exactActiveClass]: isExactActive,\n      }\"\n      v-bind=\"$attrs\"\n      @click=\";[navigate($event), clicked($event)]\"\n    >\n      <slot />\n    </component>\n  </component>\n  <component :is=\"tag\" v-else :class=\"computedLinkClasses\" v-bind=\"routerAttr\" @click=\"clicked\">\n    <slot />\n  </component>\n</template>\n\n<script setup lang=\"ts\">\nimport {useDefaults} from '../../composables/useDefaults'\nimport {useLinkClasses} from '../../composables/useLinkClasses'\nimport type {BLinkProps} from '../../types/ComponentProps'\nimport {collapseInjectionKey, navbarInjectionKey} from '../../utils/keys'\nimport {computed, getCurrentInstance, inject, useAttrs} from 'vue'\n\ndefineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  default?: (props: Record<string, never>) => any\n}>()\n\nconst _props = withDefaults(defineProps<BLinkProps>(), {\n  active: undefined,\n  activeClass: 'router-link-active',\n  disabled: false,\n  exactActiveClass: 'router-link-exact-active',\n  href: undefined,\n  icon: false,\n  opacity: undefined,\n  opacityHover: undefined,\n  // noPrefetch: {type: Boolean, default: false},\n  // prefetch: {type: Boolean, default: null},\n  rel: undefined,\n  replace: false,\n  routerComponentName: 'router-link',\n  routerTag: 'a',\n  stretched: false,\n  target: undefined,\n  to: undefined,\n  underlineOffset: undefined,\n  underlineOffsetHover: undefined,\n  underlineOpacity: undefined,\n  underlineOpacityHover: undefined,\n  underlineVariant: null,\n  variant: null,\n})\nconst props = useDefaults(_props, 'BLink')\n\nconst emit = defineEmits<{\n  click: [value: MouseEvent]\n}>()\n\nconst attrs = useAttrs()\n\nconst collapseData = inject(collapseInjectionKey, null)\nconst navbarData = inject(navbarInjectionKey, null)\n\nconst instance = getCurrentInstance()\n\nconst defaultActiveClass = 'active'\n\nconst tag = computed(() => {\n  const routerName = props.routerComponentName\n    .split('-')\n    .map((e) => e.charAt(0).toUpperCase() + e.slice(1))\n    .join('')\n  const hasRouter = instance?.appContext.app.component(routerName) !== undefined\n  if (!hasRouter || props.disabled || !props.to) {\n    return 'a'\n  }\n  return props.routerComponentName\n})\n\nconst computedHref = computed(() => {\n  const toFallback = '#'\n  if (props.href) return props.href\n\n  if (typeof props.to === 'string') return props.to || toFallback\n\n  const {to} = props\n\n  if (to !== undefined && 'path' in to) {\n    const path = to.path || ''\n    const query = to.query\n      ? `?${Object.keys(to.query)\n          .map((e) => `${e}=${to.query?.[e]}`)\n          .join('=')}`\n      : ''\n    const hash = !to.hash || to.hash.charAt(0) === '#' ? to.hash || '' : `#${to.hash}`\n    return `${path}${query}${hash}` || toFallback\n  }\n  // There is no resolver for `RouteLocationNamedRaw`. Which, I'm not sure there can be one in this context.\n\n  return toFallback\n})\n\n/**\n * Not to be confused with computedLinkClasses\n */\nconst linkValueClasses = useLinkClasses(props)\nconst computedClasses = computed(() => [\n  linkValueClasses.value,\n  {\n    'stretched-link': props.stretched === true,\n  },\n])\n\nconst routerAttr = computed(() => ({\n  'class': computedClasses.value,\n  'to': props.to,\n  'replace': props.replace,\n  'href': computedHref.value,\n  'target': props.target,\n  'rel': props.target === '_blank' ? (props.rel ?? 'noopener') : undefined,\n  'tabindex': props.disabled ? '-1' : typeof attrs.tabindex === 'undefined' ? null : attrs.tabindex,\n  'aria-disabled': props.disabled ? true : null,\n}))\n\nconst computedLinkClasses = computed(() => ({\n  [defaultActiveClass]: props.active,\n  disabled: props.disabled,\n}))\n\nconst clicked = (e: Readonly<MouseEvent>): void => {\n  if (props.disabled) {\n    e.preventDefault()\n    e.stopImmediatePropagation()\n    return\n  }\n\n  if (\n    (collapseData?.isNav?.value === true && navbarData === null) ||\n    (navbarData !== null && navbarData.autoClose?.value === true)\n  ) {\n    collapseData?.hide?.()\n  }\n\n  emit('click', e)\n}\n</script>\n"],"names":["useLinkClasses","linkProps","computed","props","toValue","variant","opacity","opacityHover","underlineVariant","underlineOffset","underlineOffsetHover","underlineOpacity","underlineOpacityHover","icon","defaultActiveClass","_props","__props","useDefaults","emit","__emit","attrs","useAttrs","collapseData","inject","collapseInjectionKey","navbarData","navbarInjectionKey","instance","getCurrentInstance","tag","routerName","routerComponentName","split","map","e","charAt","toUpperCase","slice","join","appContext","app","component","disabled","to","computedHref","href","path","query","Object","keys","_a","hash","linkValueClasses","computedClasses","value","stretched","routerAttr","class","replace","target","rel","tabindex","computedLinkClasses","active","clicked","preventDefault","stopImmediatePropagation","isNav","_b","autoClose","_c","hide","call"],"mappings":"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"}