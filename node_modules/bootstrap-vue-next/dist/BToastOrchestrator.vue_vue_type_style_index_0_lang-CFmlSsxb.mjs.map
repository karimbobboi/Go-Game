{"version":3,"file":"BToastOrchestrator.vue_vue_type_style_index_0_lang-CFmlSsxb.mjs","sources":["../src/components/BToast/BToast.vue","../src/utils/positionClasses.ts","../src/components/BToast/BToastOrchestrator.vue"],"sourcesContent":["<template>\n  <BTransition\n    :no-fade=\"props.noFade\"\n    v-bind=\"props.transProps\"\n    @before-enter=\"onBeforeEnter\"\n    @after-enter=\"onAfterEnter\"\n    @after-leave=\"onAfterLeave\"\n  >\n    <div\n      v-if=\"isToastVisible\"\n      :id=\"props.id\"\n      ref=\"element\"\n      class=\"toast\"\n      :class=\"[props.toastClass, computedClasses]\"\n      tabindex=\"0\"\n      :role=\"!isToastVisible ? undefined : props.isStatus ? 'status' : 'alert'\"\n      :aria-live=\"!isToastVisible ? undefined : props.isStatus ? 'polite' : 'assertive'\"\n      :aria-atomic=\"!isToastVisible ? undefined : true\"\n    >\n      <component\n        :is=\"props.headerTag\"\n        v-if=\"$slots.title || props.title\"\n        class=\"toast-header\"\n        :class=\"props.headerClass\"\n      >\n        <slot name=\"title\" :hide=\"hideFn\">\n          <strong class=\"me-auto\">\n            {{ props.title }}\n          </strong>\n        </slot>\n        <BCloseButton v-if=\"!props.noCloseButton\" @click=\"hideFn('close')\" />\n      </component>\n      <template v-if=\"$slots.default || props.body\">\n        <component\n          :is=\"computedTag\"\n          class=\"toast-body\"\n          style=\"display: block\"\n          :class=\"props.bodyClass\"\n          v-bind=\"computedLinkProps\"\n          @click=\"computedLink ? hideFn() : () => {}\"\n        >\n          <slot :hide=\"hideFn\">\n            {{ props.body }}\n          </slot>\n        </component>\n      </template>\n      <BProgress\n        v-if=\"typeof modelValue === 'number' && props.progressProps !== undefined\"\n        :animated=\"props.progressProps.animated\"\n        :precision=\"props.progressProps.precision\"\n        :show-progress=\"props.progressProps.showProgress\"\n        :show-value=\"props.progressProps.showValue\"\n        :striped=\"props.progressProps.striped\"\n        :variant=\"props.progressProps.variant\"\n        :max=\"modelValue\"\n        :value=\"remainingMs\"\n        height=\"4px\"\n      />\n    </div>\n  </BTransition>\n</template>\n\n<script setup lang=\"ts\">\nimport {computed, ref, watch, watchEffect} from 'vue'\nimport {useBLinkHelper} from '../../composables/useBLinkHelper'\nimport type {BToastProps} from '../../types/ComponentProps'\nimport BTransition from '../BTransition.vue'\nimport BCloseButton from '../BButton/BCloseButton.vue'\nimport BLink from '../BLink/BLink.vue'\nimport BProgress from '../BProgress/BProgress.vue'\nimport {BvTriggerableEvent} from '../../utils'\nimport {useCountdown} from '../../composables/useCountdown'\nimport {useColorVariantClasses} from '../../composables/useColorVariantClasses'\nimport {useDefaults} from '../../composables/useDefaults'\nimport {useCountdownHover} from '../../composables/useCountdownHover'\n\nconst _props = withDefaults(defineProps<Omit<BToastProps, 'modelValue'>>(), {\n  bgVariant: null,\n  body: undefined,\n  bodyClass: undefined,\n  headerClass: undefined,\n  headerTag: 'div',\n  id: undefined,\n  interval: 'requestAnimationFrame',\n  isStatus: false,\n  noCloseButton: false,\n  noFade: false,\n  noHoverPause: false,\n  noResumeOnHoverLeave: false,\n  progressProps: undefined,\n  showOnPause: true,\n  solid: false,\n  textVariant: null,\n  title: undefined,\n  toastClass: undefined,\n  transProps: undefined,\n  // Link props\n  // All others use defaults\n  noRel: undefined,\n  active: undefined,\n  activeClass: undefined,\n  disabled: undefined,\n  exactActiveClass: undefined,\n  href: undefined,\n  icon: undefined,\n  opacity: undefined,\n  opacityHover: undefined,\n  stretched: false,\n  rel: undefined,\n  replace: undefined,\n  routerComponentName: undefined,\n  target: undefined,\n  to: undefined,\n  underlineOffset: undefined,\n  underlineOffsetHover: undefined,\n  underlineOpacity: undefined,\n  underlineOpacityHover: undefined,\n  underlineVariant: undefined,\n  variant: undefined,\n  // End link props\n})\nconst props = useDefaults(_props, 'BToast')\n\nconst emit = defineEmits<{\n  'close': [value: BvTriggerableEvent]\n  'close-countdown': [value: number]\n  'hide': [value: BvTriggerableEvent]\n  'hidden': [value: BvTriggerableEvent]\n  'show': [value: BvTriggerableEvent]\n  'shown': [value: BvTriggerableEvent]\n  'show-prevented': []\n  'hide-prevented': []\n}>()\n\nconst element = ref<HTMLElement | null>(null)\n\nconst modelValue = defineModel<Exclude<BToastProps['modelValue'], undefined>>({default: false})\n\nconst {computedLink, computedLinkProps} = useBLinkHelper(props)\n\n// TODO solid is never used\nconst countdownLength = computed(() =>\n  typeof modelValue.value === 'boolean' ? 0 : modelValue.value\n)\n\nconst {\n  isActive,\n  pause,\n  restart,\n  resume,\n  stop,\n  isPaused,\n  value: remainingMs,\n} = useCountdown(countdownLength, props.interval, {\n  immediate: typeof modelValue.value === 'number',\n})\nuseCountdownHover(\n  element,\n  computed(() => ({\n    noHoverPause: props.noHoverPause,\n    noResumeOnHoverLeave: props.noResumeOnHoverLeave,\n  })),\n  {pause, resume}\n)\n\nwatchEffect(() => {\n  emit('close-countdown', remainingMs.value)\n})\n\nconst computedTag = computed(() => (computedLink.value ? BLink : 'div'))\n\nconst isToastVisible = computed(() =>\n  typeof modelValue.value === 'boolean'\n    ? modelValue.value\n    : isActive.value || (props.showOnPause && isPaused.value)\n)\n\nconst colorClasses = useColorVariantClasses(props)\nconst computedClasses = computed(() => [\n  colorClasses.value,\n  {\n    show: isToastVisible.value,\n  },\n])\n\nconst buildTriggerableEvent = (\n  type: string,\n  opts: Readonly<Partial<BvTriggerableEvent>> = {}\n): BvTriggerableEvent =>\n  new BvTriggerableEvent(type, {\n    cancelable: false,\n    target: element.value || null,\n    relatedTarget: null,\n    trigger: null,\n    ...opts,\n    componentId: props.id,\n  })\n\nconst showFn = () => {\n  const event = buildTriggerableEvent('show', {cancelable: true})\n  emit('show', event)\n  if (event.defaultPrevented) {\n    if (modelValue.value) modelValue.value = false\n    emit('show-prevented')\n    return\n  }\n  if (!modelValue.value) modelValue.value = true\n}\nconst hideFn = (trigger = '') => {\n  const event = buildTriggerableEvent('hide', {cancelable: trigger !== '', trigger})\n\n  emit('hide', event)\n\n  if (trigger === 'close') {\n    emit('close', event)\n  }\n\n  if (event.defaultPrevented) {\n    emit('hide-prevented')\n    if (!modelValue.value) modelValue.value = true\n    return\n  }\n\n  if (typeof modelValue.value === 'boolean') {\n    modelValue.value = false\n  } else {\n    modelValue.value = 0\n    stop()\n  }\n}\n\nconst onBeforeEnter = () => {\n  showFn()\n}\nconst onAfterEnter = () => {\n  emit('shown', buildTriggerableEvent('shown'))\n}\nconst onAfterLeave = () => {\n  emit('hidden', buildTriggerableEvent('hidden'))\n}\n\n// isActive in the composable will cause the toast to hide when the countdown is done\nwatch(isActive, (newValue) => {\n  if (newValue === false && isPaused.value === false && !!modelValue.value) {\n    hideFn()\n  }\n})\n\ndefineExpose({\n  pause,\n  restart,\n  resume,\n  stop,\n})\n</script>\n","import type {ContainerPosition} from '../types/Alignment'\n\nexport const positionClasses = {\n  'top-start': 'top-0 start-0',\n  'top-center': 'top-0 start-50 translate-middle-x',\n  'top-end': 'top-0 end-0',\n  'middle-start': 'top-50 start-0 translate-middle-y',\n  'middle-center': 'top-50 start-50 translate-middle',\n  'middle-end': 'top-50 end-0 translate-middle-y',\n  'bottom-start': 'bottom-0 start-0',\n  'bottom-center': 'bottom-0 start-50 translate-middle-x',\n  'bottom-end': 'bottom-0 end-0',\n} as const satisfies Record<ContainerPosition, string>\n","<template>\n  <ConditionalTeleport :to=\"props.teleportTo\" :disabled=\"props.teleportDisabled\">\n    <div id=\"__BVID__toaster-container\" v-bind=\"$attrs\">\n      <div\n        v-for=\"(value, key) in positionClasses\"\n        :key=\"key\"\n        :class=\"value\"\n        class=\"toast-container position-fixed p-3\"\n      >\n        <TransitionGroup name=\"b-list\">\n          <component\n            :is=\"toast.component ?? BToast\"\n            v-for=\"toast in tools.toasts?.value.filter((el) => el.props.pos === key)\"\n            :key=\"toast.props._self\"\n            v-bind=\"toast.props\"\n            :model-value=\"toast.props._modelValue\"\n            :trans-props=\"{...toast.props.transProps, appear: true}\"\n            @update:model-value=\"tools.leave?.(toast.props._self)\"\n            @hide=\"tools.remove?.(toast.props._self)\"\n          />\n          <!-- I think it's only coincidence that hide works, It's not tied to the lifecycle of a transition -->\n          <!-- I think actually removes the el before the transition ends, But it's just not noticeable as it's \"fading\" -->\n          <!-- It _should_ be @hidden -- as hidden is when the transition has ended. But transition in transition groups isn't \"okay\" -->\n        </TransitionGroup>\n      </div>\n    </div>\n  </ConditionalTeleport>\n</template>\n\n<script setup lang=\"ts\">\nimport {watch} from 'vue'\nimport {useDefaults} from '../../composables/useDefaults'\nimport {positionClasses} from '../../utils/positionClasses'\nimport type {BToastOrchestratorProps} from '../../types/ComponentProps'\nimport BToast from './BToast.vue'\nimport ConditionalTeleport from '../ConditionalTeleport.vue'\nimport {useToast} from '../../composables/useToast'\n\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst _props = withDefaults(defineProps<BToastOrchestratorProps>(), {\n  teleportDisabled: false,\n  teleportTo: 'body',\n  appendToast: false,\n})\nconst props = useDefaults(_props, 'BToastOrchestrator')\n\nconst tools = useToast()\n\nwatch(\n  () => props.appendToast,\n  (value) => {\n    tools._setIsAppend?.(value)\n  },\n  {immediate: true}\n)\n\ndefineExpose({\n  ...tools,\n})\n</script>\n\n<style lang=\"scss\">\n/*\nIf you remove the last element in the list, the animation goes farther to the right then normal.\nI don't know why\nI kind of like it though, and even if I didn't, I don't know how to get rid of it.\nGetting the transitions to work here was basically all trial and error.\nI think it's because it's \"moving\", but I don't know where it's moving to\n*/\n.b-list-move,\n.b-list-enter-active,\n.b-list-leave-active {\n  transition: all 0.5s cubic-bezier(0.55, 0, 0.1, 1);\n}\n.b-list-enter-from,\n.b-list-leave-to {\n  opacity: 0; // TODO this should be the responsibility of the child\n}\n.b-list-leave-active {\n  position: fixed;\n}\n</style>\n"],"names":["_useModel","BLink"],"mappings":"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"}