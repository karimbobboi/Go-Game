"use strict";const e=require("vue"),a=require("./classes-CXBJXuVd.js"),l=require("./useAlignment-BTUJZ_9x.js"),t=require("./useDefaults-C2groUjC.js"),s=require("./index-BInTFWT4.js"),o=["aria-disabled","aria-label"],i=e.defineComponent({__name:"BPagination",props:e.mergeModels({align:{default:"start"},ariaControls:{default:void 0},ariaLabel:{default:"Pagination"},disabled:{type:Boolean,default:!1},ellipsisClass:{default:void 0},ellipsisText:{default:"…"},firstClass:{default:void 0},firstNumber:{type:Boolean,default:!1},firstText:{default:"«"},hideEllipsis:{type:Boolean,default:!1},hideGotoEndButtons:{type:Boolean,default:!1},labelFirstPage:{default:"Go to first page"},labelLastPage:{default:"Go to last page"},labelNextPage:{default:"Go to next page"},labelPage:{default:"Go to page"},labelPrevPage:{default:"Go to previous page"},lastClass:{default:void 0},lastNumber:{type:Boolean,default:!1},lastText:{default:"»"},limit:{default:5},nextClass:{default:void 0},nextText:{default:"›"},pageClass:{default:void 0},perPage:{default:20},pills:{type:Boolean,default:!1},prevClass:{default:void 0},prevText:{default:"‹"},size:{default:void 0},totalRows:{default:0}},{modelValue:{default:1},modelModifiers:{}}),emits:e.mergeModels(["page-click"],["update:modelValue"]),setup(i,{emit:u}){const n=-2,r=-3,d=i,p=t.useDefaults(d,"BPagination"),c=u,v=e.useModel(i,"modelValue"),m=s.useToNumber((()=>p.limit),{nanToZero:!0,method:"parseInt"}),f=s.useToNumber((()=>p.perPage),{nanToZero:!0,method:"parseInt"}),g=s.useToNumber((()=>p.totalRows),{nanToZero:!0,method:"parseInt"}),b=s.useToNumber(v,{nanToZero:!0,method:"parseInt"}),x=e.computed((()=>Math.max(f.value||20,1))),h=e.computed((()=>Math.max(g.value||0,0))),P=e.computed((()=>Math.ceil(h.value/x.value))),k=e.computed((()=>"fill"===p.align)),B=e.computed((()=>"fill"===p.align?"start":p.align)),N=l.useAlignment(B),V=e=>e===b.value,C=e=>p.disabled||V(e)||b.value<1||e<1||e>P.value,T=e.computed((()=>C(1))),y=e.computed((()=>C(b.value-1))),w=e.computed((()=>C(P.value))),M=e.computed((()=>C(b.value+1))),E=({page:e,classVal:a,dis:l,slotName:t,textValue:s,tabIndex:o,label:i,position:u,isActive:n,role:r,hidden:d})=>({li:{class:["page-item",{active:n,disabled:l,"flex-fill":k.value,"d-flex":k.value&&!l},a],role:r,"aria-hidden":d},button:{is:l?"span":"button",class:["page-link","text-center",{"flex-grow-1":!l&&k.value}],"aria-label":i,"aria-controls":p.ariaControls||void 0,"aria-disabled":!!l||void 0,"aria-posinset":u,"aria-setsize":u?P.value:void 0,role:"menuitem",type:l?void 0:"button",tabindex:l?void 0:o},text:{name:t,active:n,value:s??e,page:e,disabled:l,index:e-1,content:s?void 0:e},clickHandler:a=>D(a,e)}),_=({page:e,classVal:a,dis:l,slotName:t,textValue:s,label:o})=>E({page:e,classVal:a,dis:l,slotName:t,textValue:s,label:o,tabIndex:"-1"}),z=e.computed((()=>_({page:1,dis:T.value,classVal:p.firstClass,slotName:"first-text",textValue:p.firstText,label:p.labelFirstPage}))),G=e.computed((()=>_({page:Math.max(b.value-1,1),dis:y.value,classVal:p.prevClass,slotName:"prev-text",textValue:p.prevText,label:p.labelPrevPage}))),I=e.computed((()=>_({page:Math.min(b.value+1,P.value),dis:M.value,classVal:p.nextClass,slotName:"next-text",textValue:p.nextText,label:p.labelNextPage}))),S=e.computed((()=>_({page:P.value,dis:w.value,classVal:p.lastClass,slotName:"last-text",textValue:p.lastText,label:p.labelLastPage}))),A=e.computed((()=>({li:{class:["page-item","disabled","text-center","bv-d-xs-down-none",k.value?"flex-fill":"",p.ellipsisClass],role:"separator"},span:{class:["page-link"]}}))),$=e.computed((()=>[N.value,{[`pagination-${p.size}`]:void 0!==p.size,"b-pagination-pills":p.pills}])),q=e.computed((()=>({pageSize:x.value,totalRows:g.value,numberOfPages:P.value}))),D=(e,l)=>{if(l===b.value)return;const t=new a.BvEvent("page-click",{cancelable:!0,target:e.target});c("page-click",t,l),t.defaultPrevented||(v.value=l)};e.watch(b,(e=>{const a=((e,a)=>{const l=e||1;return l>a?a:l<1?1:l})(e,P.value);a!==v.value&&(v.value=a)})),e.watch(q,((e,a)=>{(a.pageSize!==e.pageSize&&a.totalRows===e.totalRows||a.numberOfPages!==e.numberOfPages&&b.value>a.numberOfPages)&&(v.value=1)}));const L=e.computed((()=>R.value.map((e=>{switch(e){case-1:return{id:e,...z.value};case n:return{id:e,...G.value};case r:return{id:e,...I.value};case-4:return{id:e,...S.value};case-5:case-6:return{id:e,...A.value};default:return{id:e,...(a=e,E({page:a,dis:p.disabled,classVal:p.pageClass,slotName:"page",label:p.labelPage?`${p.labelPage} ${a}`:void 0,tabIndex:(l=a,(p.disabled?null:V(l)?"0":"-1")??void 0),position:a,isActive:V(a)}))}}var a,l})))),R=e.computed((()=>{const e=P.value,{value:a}=b,l=m.value,t=p.firstNumber?1:0,s=p.lastNumber?1:0,o=p.hideEllipsis||l<=3,i=p.hideGotoEndButtons&&!p.firstNumber?1:0,u=p.hideGotoEndButtons&&!p.lastNumber?1:0,d=i?0:1,c=u?0:1;if(e<l+t+s)return[t||i?null:-1,n,...Array.from({length:e},((e,a)=>a+1)),r,s||u?null:-4].filter((e=>null!==e));const v=Array.from({length:l+4-(i+u)});i?v[0]=n:t?(v[0]=n,v[1]=1):(v[0]=-1,v[1]=n),u?v[v.length-1]=r:s?(v[v.length-1]=r,v[v.length-2]=e):(v[v.length-1]=-4,v[v.length-2]=r);const f=Math.floor(l/2);if(a<=f+t){for(let e=1;e<=l;e++)v[e+1-i]=e+t;o||(v[v.length-(2+c)]=-6)}if(a>e-f-s){const a=e-(l-1)-s;for(let e=0;e<l;e++)v[e+2-i]=a+e;o||(v[1+d]=-5)}if(!v[2]){const e=a-Math.floor(l/2);for(let a=0;a<l;a++)v[a+2-i]=e+a;o||(v[1+d]=-5,v[v.length-(2+c)]=-6)}return v.filter((e=>null!==e))}));return(a,l)=>(e.openBlock(),e.createElementBlock("ul",{class:e.normalizeClass(["pagination",$.value]),role:"menubar","aria-disabled":e.unref(p).disabled,"aria-label":e.unref(p).ariaLabel||void 0},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(L.value,(l=>(e.openBlock(),e.createElementBlock("li",e.mergeProps({key:`page-${l.id}`,ref_for:!0},l.li),[-5===l.id||-6===l.id?(e.openBlock(),e.createElementBlock("span",e.mergeProps({key:0,ref_for:!0},A.value.span),[e.renderSlot(a.$slots,"ellipsis-text",{},(()=>[e.createTextVNode(e.toDisplayString(e.unref(p).ellipsisText||"..."),1)]))],16)):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.button.is),e.mergeProps({key:1,ref_for:!0},l.button,{onClick:l.clickHandler}),{default:e.withCtx((()=>[e.renderSlot(a.$slots,l.text.name,{disabled:l.text.disabled,page:l.text.page,index:l.text.index,active:l.text.active,content:l.text.value},(()=>[e.createTextVNode(e.toDisplayString(l.text.value),1)]))])),_:2},1040,["onClick"]))],16)))),128))],10,o))}});exports._sfc_main=i;
//# sourceMappingURL=BPagination.vue_vue_type_script_setup_true_lang-C0PGh9wY.js.map
