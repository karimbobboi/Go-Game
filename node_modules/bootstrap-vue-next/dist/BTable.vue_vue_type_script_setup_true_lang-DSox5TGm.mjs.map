{"version":3,"file":"BTable.vue_vue_type_script_setup_true_lang-DSox5TGm.mjs","sources":["../src/utils/formatItem.ts","../src/types/TableTypes.ts","../src/components/BTable/BTbody.vue","../src/components/BTable/BTd.vue","../src/components/BTable/BTfoot.vue","../src/components/BTable/BTh.vue","../src/components/BTable/BThead.vue","../src/components/BTable/BTr.vue","../src/utils/getTableFieldHeadLabel.ts","../src/utils/filterEvent.ts","../src/components/BTable/BTableLite.vue","../src/components/BTable/BTable.vue"],"sourcesContent":["import type {TableFieldFormatter} from '../types/TableTypes'\nimport {get} from './object'\n\nexport const formatItem = (\n  item: unknown,\n  // Weakly type fieldKey because it can be a nested string, such as 'foo.bar.baz'\n  fieldKey: string,\n  formatter?: TableFieldFormatter<unknown>\n) => {\n  const val = get(item, fieldKey)\n  return formatter && typeof formatter === 'function' ? formatter(val, fieldKey, item) : val\n}\n","import type {StyleValue} from 'vue'\nimport type {ColorVariant} from './ColorTypes'\nimport type {MaybePromise} from './MaybePromise'\nimport type {LiteralUnion} from './LiteralUnion'\nimport type {AttrsValue, ClassValue} from './AnyValuedAttributes'\n\nexport type TableItem<T = Record<string, unknown>> = T & {\n  _rowVariant?: ColorVariant | null\n  _cellVariants?: Partial<Record<keyof T, ColorVariant>>\n  _showDetails?: boolean\n}\n\nexport const isTableItem = (value: unknown): value is TableItem =>\n  typeof value === 'object' && value !== null\n\n// undefined means no sorting\nexport type BTableSortByOrder = 'desc' | 'asc' | undefined\n\nexport type BTableSortBy = {\n  order: BTableSortByOrder\n  key: string\n  comparer?: (a: string, b: string) => number\n}\n\nexport type BTableProviderContext = {\n  sortBy: BTableSortBy[] | undefined\n  filter: string | undefined\n  currentPage: number\n  perPage: number\n}\n\nexport type BTableProvider<T> = (\n  context: Readonly<BTableProviderContext>\n) => MaybePromise<T[] | undefined>\n\nexport type TableFieldFormatter<T> = (value: unknown, key: string, item: T) => string\n\nexport type TableRowType = 'row' | 'row-details' | 'row-top' | 'row-bottom' | 'table-busy'\nexport type TableRowThead = 'top' | 'bottom'\n\nexport type TableStrictClassValue = string | unknown[] | Record<string, boolean>\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type TableField<T = any> = {\n  key: LiteralUnion<keyof T>\n  label?: string\n  headerTitle?: string\n  headerAbbr?: string\n  class?: ClassValue\n  formatter?: TableFieldFormatter<T>\n  sortable?: boolean\n  sortKey?: string\n  sortDirection?: string\n  sortByFormatted?: boolean | TableFieldFormatter<T>\n  filterByFormatted?: boolean | TableFieldFormatter<T>\n  tdClass?:\n    | TableStrictClassValue\n    | ((value: unknown, key: string, item: T) => TableStrictClassValue)\n  thClass?: ClassValue\n  thStyle?: StyleValue\n  variant?: ColorVariant | null\n  tdAttr?: AttrsValue | ((value: unknown, key: string, item: T) => AttrsValue)\n  thAttr?:\n    | AttrsValue\n    | ((value: unknown, key: string, item: T | null, type: TableRowThead) => AttrsValue)\n  isRowHeader?: boolean\n  stickyColumn?: boolean\n}\n\nexport type TableFieldRaw<T = unknown> = T extends object\n  ? LiteralUnion<keyof T> | TableField<T>\n  : string | TableField\n\nexport const isTableField = <T>(value: unknown): value is TableField<T> =>\n  typeof value === 'object' && value !== null && 'key' in value\n\nexport const isTableFieldRaw = <T>(value: unknown): value is TableFieldRaw<T> =>\n  typeof value === 'string' || isTableField(value)\n\nexport type NoProviderTypes = 'paging' | 'sorting' | 'filtering'\n","<template>\n  <tbody :class=\"computedClasses\">\n    <slot />\n  </tbody>\n</template>\n\n<script setup lang=\"ts\">\nimport {useDefaults} from '../../composables/useDefaults'\nimport type {BTbodyProps} from '../../types/ComponentProps'\nimport {computed} from 'vue'\n\nconst _props = withDefaults(defineProps<BTbodyProps>(), {\n  variant: null,\n})\nconst props = useDefaults(_props, 'BTbody')\n\ndefineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  default?: (props: Record<string, never>) => any\n}>()\n\nconst computedClasses = computed(() => ({\n  [`thead-${props.variant}`]: props.variant !== null,\n}))\n</script>\n","<template>\n  <td\n    :scope=\"scope\"\n    :class=\"computedClasses\"\n    :colspan=\"props.colspan\"\n    :rowspan=\"props.rowspan\"\n    :data-label=\"props.stackedHeading\"\n  >\n    <div v-if=\"props.stackedHeading\">\n      <slot />\n    </div>\n    <slot v-else />\n  </td>\n</template>\n\n<script setup lang=\"ts\">\nimport {useDefaults} from '../../composables/useDefaults'\nimport type {BTdProps} from '../../types/ComponentProps'\nimport {computed} from 'vue'\n\nconst _props = withDefaults(defineProps<BTdProps>(), {\n  colspan: undefined,\n  rowspan: undefined,\n  stackedHeading: undefined,\n  stickyColumn: false,\n  variant: null,\n})\nconst props = useDefaults(_props, 'BTd')\n\ndefineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  default?: (props: Record<string, never>) => any\n}>()\n\nconst computedClasses = computed(() => ({\n  [`table-${props.variant}`]: props.variant !== null,\n  'b-table-sticky-column': props.stickyColumn,\n  'table-b-table-default': props.stickyColumn && props.variant === null,\n}))\n\nconst scope = computed(() => (props.colspan ? 'colspan' : props.rowspan ? 'rowspan' : 'col'))\n</script>\n","<template>\n  <tfoot :class=\"computedClasses\">\n    <slot />\n  </tfoot>\n</template>\n\n<script setup lang=\"ts\">\nimport {useDefaults} from '../../composables/useDefaults'\nimport type {BTfootProps} from '../../types/ComponentProps'\nimport {computed} from 'vue'\n\nconst _props = withDefaults(defineProps<BTfootProps>(), {\n  variant: null,\n})\nconst props = useDefaults(_props, 'BTfoot')\n\ndefineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  default?: (props: Record<string, never>) => any\n}>()\n\nconst computedClasses = computed(() => ({\n  [`table-${props.variant}`]: props.variant !== null,\n}))\n</script>\n","<template>\n  <th\n    :scope=\"scope\"\n    :class=\"computedClasses\"\n    :colspan=\"props.colspan\"\n    :rowspan=\"props.rowspan\"\n    :data-label=\"props.stackedHeading\"\n  >\n    <div v-if=\"props.stackedHeading !== undefined\">\n      <slot />\n    </div>\n    <slot v-else />\n  </th>\n</template>\n\n<script setup lang=\"ts\">\nimport {useDefaults} from '../../composables/useDefaults'\nimport type {BThProps} from '../../types/ComponentProps'\nimport {computed} from 'vue'\n\nconst _props = withDefaults(defineProps<BThProps>(), {\n  colspan: undefined,\n  rowspan: undefined,\n  stackedHeading: undefined,\n  stickyColumn: false,\n  variant: null,\n})\nconst props = useDefaults(_props, 'BTh')\n\ndefineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  default?: (props: Record<string, never>) => any\n}>()\n\nconst computedClasses = computed(() => ({\n  [`table-${props.variant}`]: props.variant !== null,\n  'b-table-sticky-column': props.stickyColumn,\n  'table-b-table-default': props.stickyColumn && props.variant === null,\n}))\n\nconst scope = computed(() => (props.colspan ? 'colspan' : props.rowspan ? 'rowspan' : 'col'))\n</script>\n","<template>\n  <thead :class=\"computedClasses\">\n    <slot />\n  </thead>\n</template>\n\n<script setup lang=\"ts\">\nimport {useDefaults} from '../../composables/useDefaults'\nimport type {BTheadProps} from '../../types/ComponentProps'\nimport {computed} from 'vue'\n\nconst _props = withDefaults(defineProps<BTheadProps>(), {\n  variant: null,\n})\nconst props = useDefaults(_props, 'BThead')\n\ndefineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  default?: (props: Record<string, never>) => any\n}>()\n\nconst computedClasses = computed(() => ({\n  [`table-${props.variant}`]: props.variant !== null,\n}))\n</script>\n","<template>\n  <tr :class=\"computedClasses\">\n    <slot />\n  </tr>\n</template>\n\n<script setup lang=\"ts\">\nimport {useDefaults} from '../../composables/useDefaults'\nimport type {BTrProps} from '../../types/ComponentProps'\nimport {computed} from 'vue'\n\nconst _props = withDefaults(defineProps<BTrProps>(), {\n  variant: null,\n})\nconst props = useDefaults(_props, 'BTr')\n\ndefineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  default?: (props: Record<string, never>) => any\n}>()\n\nconst computedClasses = computed(() => ({\n  [`table-${props.variant}`]: props.variant !== null,\n}))\n</script>\n","import {titleCase} from './stringUtils'\nimport type {TableFieldRaw} from '../types/TableTypes'\n\nexport const getTableFieldHeadLabel = (field: Readonly<TableFieldRaw<unknown>>) =>\n  typeof field === 'string'\n    ? titleCase(field)\n    : field.label !== undefined\n      ? field.label\n      : typeof field.key === 'string'\n        ? titleCase(field.key)\n        : field.key\n","const TABLE_TAG_NAMES = ['TD', 'TH', 'TR']\n\n// Filter CSS selector for click/dblclick/etc. events\n// If any of these selectors match the clicked element, we ignore the event\nconst eventFilter = [\n  'a',\n  'a *', // Include content inside links\n  'button',\n  'button *', // Include content inside buttons\n  'input:not(.disabled):not([disabled])',\n  'select:not(.disabled):not([disabled])',\n  'textarea:not(.disabled):not([disabled])',\n  '[role=\"link\"]',\n  '[role=\"link\"] *',\n  '[role=\"button\"]',\n  '[role=\"button\"] *',\n  '[tabindex]:not(.disabled):not([disabled])',\n].join(',')\n\n// Returns `true` if we should ignore the click/double-click/keypress event\n// Avoids having the user need to use `@click.stop` on the form control\nexport const filterEvent = (event: Readonly<Event>) => {\n  // Exit early when we don't have a target element\n  if (!event || !event.target) {\n    return false\n  }\n  const el = event.target as HTMLElement\n  // Exit early when element is disabled or a table element\n  if (('disabled' in el && el.disabled) || TABLE_TAG_NAMES.indexOf(el.tagName) !== -1) {\n    return false\n  }\n  // Ignore the click when it was inside a dropdown menu\n  if (el.closest('.dropdown-menu')) return true\n\n  const label = el.tagName === 'LABEL' ? el : el.closest('label')\n  // If the label's form control is not disabled then we don't propagate event\n  // Modern browsers have `label.control` that references the associated input, but IE 11\n  // does not have this property on the label element, so we resort to DOM lookups\n  if (label) {\n    const labelFor = label.getAttribute('for')\n    const input = labelFor\n      ? document.getElementById(labelFor)\n      : label.querySelector('input, select, textarea')\n    if (input && !(input as HTMLInputElement).disabled) {\n      return true\n    }\n  }\n  // Otherwise check if the event target matches one of the selectors in the\n  // event filter (i.e. anchors, non disabled inputs, etc.)\n  // Return `true` if we should ignore the event\n  return el.matches(eventFilter)\n}\n","<template>\n  <BTableSimple\n    :id=\"props.id\"\n    :bordered=\"props.bordered\"\n    :borderless=\"props.borderless\"\n    :border-variant=\"props.borderVariant\"\n    :caption-top=\"props.captionTop\"\n    :dark=\"props.dark\"\n    :fixed=\"props.fixed\"\n    :hover=\"props.hover\"\n    :no-border-collapse=\"props.noBorderCollapse\"\n    :outlined=\"props.outlined\"\n    :responsive=\"props.responsive\"\n    :small=\"props.small\"\n    :stacked=\"props.stacked\"\n    :sticky-header=\"props.stickyHeader\"\n    :striped=\"props.striped\"\n    :table-class=\"computedTableClasses\"\n    :variant=\"props.variant\"\n    :striped-columns=\"props.stripedColumns\"\n  >\n    <BThead v-show=\"showComputedHeaders\" :variant=\"props.headVariant\" :class=\"props.theadClass\">\n      <slot v-if=\"$slots['thead-top']\" name=\"thead-top\" />\n      <BTr :variant=\"props.headRowVariant\" :class=\"props.theadTrClass\">\n        <BTh\n          v-for=\"field in computedFields\"\n          :key=\"field.key\"\n          scope=\"col\"\n          :class=\"getFieldColumnClasses(field)\"\n          :title=\"field.headerTitle\"\n          :variant=\"field.variant\"\n          :abbr=\"field.headerAbbr\"\n          :style=\"field.thStyle\"\n          v-bind=\"callThAttr(null, field, 'top')\"\n          @click=\"headerClicked(field, $event)\"\n        >\n          <slot\n            :name=\"$slots[`head(${String(field.key)})`] ? `head(${String(field.key)})` : 'head()'\"\n            :label=\"field.label\"\n            :column=\"field.key\"\n            :field=\"field\"\n            :is-foot=\"false\"\n          >\n            {{ getTableFieldHeadLabel(field) }}\n          </slot>\n        </BTh>\n      </BTr>\n      <BTr v-if=\"$slots['thead-sub']\">\n        <BTd\n          v-for=\"field in computedFields\"\n          :key=\"field.key\"\n          scope=\"col\"\n          :variant=\"field.variant\"\n          :class=\"[field.class, field.thClass]\"\n        >\n          <slot name=\"thead-sub\" :items=\"computedFields\" v-bind=\"field\">\n            {{ field.label }}\n          </slot>\n        </BTd>\n      </BTr>\n    </BThead>\n    <BTbody :class=\"props.tbodyClass\">\n      <slot\n        name=\"custom-body\"\n        :fields=\"computedFields\"\n        :items=\"props.items\"\n        :columns=\"computedFields.length\"\n      >\n        <BTr\n          v-if=\"!props.stacked && $slots['top-row']\"\n          :class=\"getRowClasses(null, 'row-top')\"\n          v-bind=\"callTbodyTrAttrs(null, 'row-top')\"\n        >\n          <slot name=\"top-row\" />\n        </BTr>\n\n        <template\n          v-for=\"(item, itemIndex) in props.items\"\n          :key=\"props.primaryKey ? get(item, props.primaryKey) : itemIndex\"\n        >\n          <BTr\n            :class=\"getRowClasses(item, 'row')\"\n            :variant=\"isTableItem(item) ? item._rowVariant : undefined\"\n            v-bind=\"callTbodyTrAttrs(item, 'row')\"\n            @click=\"!filterEvent($event) && emit('row-clicked', item, itemIndex, $event)\"\n            @dblclick=\"!filterEvent($event) && emit('row-dbl-clicked', item, itemIndex, $event)\"\n            @mouseenter=\"!filterEvent($event) && emit('row-hovered', item, itemIndex, $event)\"\n            @mouseleave=\"!filterEvent($event) && emit('row-unhovered', item, itemIndex, $event)\"\n          >\n            <BTd\n              v-for=\"field in computedFields\"\n              :key=\"field.key\"\n              :variant=\"\n                (isTableItem(item) ? item._cellVariants?.[field.key as string] : false)\n                  ? null\n                  : field.variant\n              \"\n              :class=\"getFieldRowClasses(field, item)\"\n              v-bind=\"itemAttributes(item, String(field.key), field.tdAttr)\"\n            >\n              <label v-if=\"props.stacked && props.labelStacked\" class=\"b-table-stacked-label\">\n                {{ getTableFieldHeadLabel(field) }}\n              </label>\n              <slot\n                :name=\"\n                  $slots[`cell(${String(field.key)})`] ? `cell(${String(field.key)})` : 'cell()'\n                \"\n                :value=\"formatItem(item, String(field.key), field.formatter)\"\n                :unformatted=\"get(item, String(field.key))\"\n                :index=\"itemIndex\"\n                :item=\"item\"\n                :field=\"field\"\n                :items=\"items\"\n                :toggle-details=\"\n                  () => {\n                    toggleRowDetails(item)\n                  }\n                \"\n                :details-showing=\"isTableItem(item) ? (detailsMap.get(item) ?? false) : false\"\n              >\n                <template v-if=\"!$slots[`cell(${String(field.key)})`] && !$slots['cell()']\">\n                  {{ formatItem(item, String(field.key), field.formatter) }}\n                </template>\n              </slot>\n            </BTd>\n          </BTr>\n\n          <template\n            v-if=\"isTableItem(item) && detailsMap.get(item) === true && $slots['row-details']\"\n          >\n            <BTr aria-hidden=\"true\" role=\"presentation\" class=\"d-none\" />\n            <BTr\n              :class=\"getRowClasses(item, 'row-details')\"\n              :variant=\"item._rowVariant\"\n              v-bind=\"callTbodyTrAttrs(item, 'row-details')\"\n            >\n              <BTd :colspan=\"computedFieldsTotal\" :class=\"detailsTdClass\">\n                <slot\n                  name=\"row-details\"\n                  :item=\"item\"\n                  :toggle-details=\"\n                    () => {\n                      toggleRowDetails(item)\n                    }\n                  \"\n                  :fields=\"props.fields\"\n                  :index=\"itemIndex\"\n                />\n              </BTd>\n            </BTr>\n          </template>\n        </template>\n        <BTr v-if=\"props.showEmpty && props.items.length === 0\" class=\"b-table-empty-slot\">\n          <BTd :colspan=\"computedFieldsTotal\">\n            <slot name=\"empty\" :items=\"props.items\">\n              {{ props.emptyText }}\n            </slot>\n          </BTd>\n        </BTr>\n        <!-- This class is for specific targetting of this slot element -->\n        <BTr\n          v-if=\"!props.stacked && $slots['bottom-row']\"\n          class=\"bottom-row\"\n          :class=\"getRowClasses(null, 'row-bottom')\"\n          v-bind=\"callTbodyTrAttrs(null, 'row-bottom')\"\n        >\n          <slot name=\"bottom-row\" />\n        </BTr>\n      </slot>\n    </BTbody>\n    <BTfoot v-if=\"props.footClone\" :variant=\"props.footVariant\" :class=\"props.tfootClass\">\n      <BTr :variant=\"props.footRowVariant\" :class=\"props.tfootTrClass\">\n        <BTh\n          v-for=\"field in computedFields\"\n          :key=\"field.key\"\n          scope=\"col\"\n          :class=\"getFieldColumnClasses(field)\"\n          :title=\"field.headerTitle\"\n          :abbr=\"field.headerAbbr\"\n          :style=\"field.thStyle\"\n          :variant=\"field.variant\"\n          v-bind=\"callThAttr(null, field, 'bottom')\"\n          @click=\"headerClicked(field, $event, true)\"\n        >\n          <div class=\"d-inline-flex flex-nowrap align-items-center gap-1\">\n            <div>\n              <slot\n                :name=\"\n                  $slots[`foot(${String(field.key)})`] ? `foot(${String(field.key)})` : 'foot()'\n                \"\n                :label=\"field.label\"\n                :column=\"field.key\"\n                :field=\"field\"\n                :is-foot=\"true\"\n              >\n                {{ getTableFieldHeadLabel(field) }}\n              </slot>\n            </div>\n          </div>\n        </BTh>\n      </BTr>\n    </BTfoot>\n    <BTfoot v-else-if=\"$slots['custom-foot']\">\n      <slot\n        name=\"custom-foot\"\n        :fields=\"computedFields\"\n        :items=\"props.items\"\n        :columns=\"computedFields.length\"\n      />\n    </BTfoot>\n    <caption v-if=\"$slots['table-caption'] || props.caption\">\n      <slot name=\"table-caption\">\n        {{ props.caption }}\n      </slot>\n    </caption>\n  </BTableSimple>\n</template>\n\n<script setup lang=\"ts\" generic=\"T\">\nimport {computed, ref, watch} from 'vue'\nimport type {BTableLiteProps} from '../../types/ComponentProps'\nimport {\n  isTableField,\n  isTableItem,\n  type TableField,\n  type TableItem,\n  type TableRowThead,\n  type TableRowType,\n} from '../../types/TableTypes'\nimport BTableSimple from './BTableSimple.vue'\nimport BTbody from './BTbody.vue'\nimport BTd from './BTd.vue'\nimport BTfoot from './BTfoot.vue'\nimport BTh from './BTh.vue'\nimport BThead from './BThead.vue'\nimport BTr from './BTr.vue'\nimport {useDefaults} from '../../composables/useDefaults'\nimport {get} from '../../utils/object'\nimport {getTableFieldHeadLabel} from '../../utils/getTableFieldHeadLabel'\nimport {formatItem} from '../../utils/formatItem'\nimport {filterEvent} from '../../utils/filterEvent'\nimport {startCase} from '../../utils/stringUtils'\n\nconst _props = withDefaults(defineProps<BTableLiteProps<T>>(), {\n  caption: undefined,\n  align: undefined,\n  fields: () => [],\n  footClone: false,\n  items: () => [],\n  labelStacked: false,\n  showEmpty: false,\n  emptyText: 'There are no records to show',\n  emptyFilteredText: 'There are no records matching your request', // TODO not implemented\n  fieldColumnClass: undefined,\n  tbodyTrClass: undefined,\n  captionHtml: undefined,\n  detailsTdClass: undefined,\n  headVariant: undefined,\n  headRowVariant: undefined,\n  footRowVariant: undefined,\n  footVariant: undefined,\n  modelValue: undefined,\n  primaryKey: undefined,\n  tbodyClass: undefined,\n  tbodyTrAttrs: undefined,\n  tfootClass: undefined,\n  tfootTrClass: undefined,\n  theadClass: undefined,\n  theadTrClass: undefined,\n  // BTableSimpleProps props\n  borderVariant: undefined,\n  tableClass: undefined,\n  variant: undefined,\n  bordered: undefined,\n  borderless: undefined,\n  captionTop: undefined,\n  dark: undefined,\n  hover: undefined,\n  id: undefined,\n  noBorderCollapse: undefined,\n  outlined: undefined,\n  fixed: undefined,\n  responsive: undefined,\n  stacked: undefined,\n  striped: undefined,\n  stripedColumns: undefined,\n  small: undefined,\n  stickyHeader: undefined,\n  // End BTableSimpleProps props\n})\nconst props = useDefaults(_props, 'BTableLite')\n\nconst emit = defineEmits<{\n  'head-clicked': [key: string, field: TableField<T>, event: MouseEvent, isFooter: boolean]\n  'row-clicked': [item: T, index: number, event: MouseEvent]\n  'row-dbl-clicked': [item: T, index: number, event: MouseEvent]\n  'row-hovered': [item: T, index: number, event: MouseEvent]\n  'row-unhovered': [item: T, index: number, event: MouseEvent]\n}>()\n\nconst generateDetailsItem = (item: TableItem): [object, boolean | undefined] => [\n  item,\n  item._showDetails,\n]\nconst detailsMap = ref(new WeakMap<object, boolean | undefined>())\nwatch(\n  () => props.items,\n  (items) => {\n    items.forEach((item) => {\n      if (!isTableItem(item)) return\n      detailsMap.value.set(...generateDetailsItem(item))\n    })\n  },\n  {deep: true, immediate: true}\n)\n\nconst computedTableClasses = computed(() => [\n  props.tableClass,\n  {\n    [`align-${props.align}`]: props.align !== undefined,\n  },\n])\n\nconst computedFields = computed<(TableField & {_noHeader?: true})[]>(() => {\n  if (!props.fields.length && props.items.length) {\n    const [firstItem] = props.items\n    if (isTableItem(firstItem) || Array.isArray(firstItem)) {\n      return Object.keys(firstItem).map((k) => {\n        const label = startCase(k)\n        return {\n          key: k,\n          label,\n          tdAttr: props.stacked === true ? {'data-label': label} : undefined,\n        }\n      })\n    }\n    // The items are primitives, so we just return a single empty field\n    // No header will be shown, as we don't know what to show\n    return [{key: '', _noHeader: true}]\n  }\n\n  return props.fields.map((f) => {\n    if (isTableField(f)) {\n      return {\n        ...(f as TableField),\n        tdAttr:\n          props.stacked === true\n            ? {'data-label': startCase(f.key as string), ...f.tdAttr}\n            : f.tdAttr,\n      }\n    }\n    const label = startCase(f as string)\n    return {\n      key: f as string,\n      label,\n      tdAttr: props.stacked === true ? {'data-label': label} : undefined,\n    }\n  })\n})\nconst computedFieldsTotal = computed(() => computedFields.value.length)\nconst showComputedHeaders = computed(() => {\n  // We only hide the header if all fields have _noHeader set to true. Which would be our doing\n  // This usually happens under a circumstance of displaying an array of primitives\n  // Under any other circumstance, I'm not sure how this would apply\n  if (computedFields.value.length > 0 && computedFields.value.every((el) => el._noHeader === true))\n    return false\n  return true\n})\n\nconst itemAttributes = (item: T, fieldKey: string, attr?: unknown) => {\n  const val = get(item, fieldKey)\n  return attr && typeof attr === 'function' ? attr(val, fieldKey, item) : attr\n}\n\nconst callThAttr = (item: T | null, field: TableField<T>, type: TableRowThead) => {\n  const fieldKey = String(field.key)\n  const val = get(item, fieldKey)\n  return field.thAttr && typeof field.thAttr === 'function'\n    ? field.thAttr(val, fieldKey, item, type)\n    : field.thAttr\n}\n\nconst headerClicked = (field: TableField<T>, event: Readonly<MouseEvent>, isFooter = false) => {\n  emit('head-clicked', field.key as string, field, event, isFooter)\n}\n\nconst toggleRowDetails = (tr: T) => {\n  if (isTableItem(tr)) {\n    const prevValue = detailsMap.value.get(tr)\n    detailsMap.value.set(tr, !prevValue)\n    tr._showDetails = !prevValue\n  }\n}\n\nconst getFieldColumnClasses = (field: TableField) => [\n  field.class,\n  field.thClass,\n  {\n    'b-table-sticky-column': field.stickyColumn,\n  },\n  props.fieldColumnClass\n    ? typeof props.fieldColumnClass === 'function'\n      ? props.fieldColumnClass(field)\n      : props.fieldColumnClass\n    : null,\n]\n\nconst getFieldRowClasses = (field: Readonly<TableField>, tr: T) => {\n  const val = get(tr, String(field.key))\n  return [\n    field.class,\n    typeof field.tdClass === 'function' ? field.tdClass(val, String(field.key), tr) : field.tdClass,\n    (isTableItem(tr) ? tr._cellVariants?.[field.key as string] : false)\n      ? `table-${(tr as TableItem)._cellVariants?.[field.key as string]}`\n      : null,\n    {\n      'b-table-sticky-column': field.stickyColumn,\n    },\n  ]\n}\n\nconst callTbodyTrAttrs = (item: T | null, type: TableRowType) =>\n  props.tbodyTrAttrs\n    ? typeof props.tbodyTrAttrs === 'function'\n      ? props.tbodyTrAttrs(item, type)\n      : props.tbodyTrAttrs\n    : null\n\nconst getRowClasses = (item: T | null, type: TableRowType) =>\n  props.tbodyTrClass\n    ? typeof props.tbodyTrClass === 'function'\n      ? props.tbodyTrClass(item, type)\n      : props.tbodyTrClass\n    : null\n</script>\n","<template>\n  <BTableLite\n    v-bind=\"props\"\n    :aria-busy=\"busyModel\"\n    :items=\"computedDisplayItems\"\n    :fields=\"computedFields as TableFieldRaw<T>[]\"\n    :table-class=\"tableClasses\"\n    :tbody-tr-class=\"getRowClasses\"\n    :field-column-class=\"getFieldColumnClasses\"\n    @head-clicked=\"onFieldHeadClick\"\n    @row-dbl-clicked=\"\n      (row: T, index: number, e: MouseEvent) => {\n        emit('row-dbl-clicked', row, index, e)\n      }\n    \"\n    @row-clicked=\"onRowClick\"\n    @row-hovered=\"\n      (row: T, index: number, e: MouseEvent) => {\n        emit('row-hovered', row, index, e)\n      }\n    \"\n    @row-unhovered=\"\n      (row: T, index: number, e: MouseEvent) => {\n        emit('row-unhovered', row, index, e)\n      }\n    \"\n  >\n    <template v-for=\"(_, name) in $slots\" #[name]=\"slotData\">\n      <slot :name=\"name\" v-bind=\"slotData\" />\n    </template>\n    <template\n      v-for=\"field in computedFields\"\n      :key=\"field.key\"\n      #[`head(${String(field.key)})`]=\"scope\"\n    >\n      <slot\n        :name=\"$slots[`head(${String(field.key)})`] ? `head(${String(field.key)})` : 'head()'\"\n        v-bind=\"scope\"\n      >\n        {{ getTableFieldHeadLabel(field) }}\n      </slot>\n      <template v-if=\"isSortable && !!scope.field.sortable && props.noSortableIcon === false\">\n        <slot\n          v-if=\"sortByModel?.find((el) => el.key === scope.field.key)?.order === 'asc'\"\n          v-bind=\"{...scope}\"\n          :name=\"\n            $slots[`sortAsc(${String(scope.field.key)})`]\n              ? `sortAsc(${String(scope.field.key)})`\n              : 'sortAsc()'\n          \"\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"24\"\n            height=\"24\"\n            fill=\"currentColor\"\n            class=\"bi bi-arrow-up-short\"\n            viewBox=\"0 0 16 16\"\n            aria-hidden\n          >\n            <path\n              fill-rule=\"evenodd\"\n              d=\"M8 12a.5.5 0 0 0 .5-.5V5.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 5.707V11.5a.5.5 0 0 0 .5.5z\"\n            />\n          </svg>\n        </slot>\n        <slot\n          v-else-if=\"sortByModel?.find((el) => el.key === scope.field.key)?.order === 'desc'\"\n          v-bind=\"{...scope}\"\n          :name=\"\n            $slots[`sortDesc(${String(scope.field.key)})`]\n              ? `sortDesc(${String(scope.field.key)})`\n              : 'sortDesc()'\n          \"\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"24\"\n            height=\"24\"\n            fill=\"currentColor\"\n            class=\"bi bi-arrow-down-short\"\n            viewBox=\"0 0 16 16\"\n            aria-hidden\n          >\n            <path\n              fill-rule=\"evenodd\"\n              d=\"M8 4a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5A.5.5 0 0 1 8 4z\"\n            />\n          </svg>\n        </slot>\n        <slot\n          v-else\n          v-bind=\"{...scope}\"\n          :name=\"\n            $slots[`sortDefault(${String(scope.field.key)})`]\n              ? `sortDefault(${String(scope.field.key)})`\n              : 'sortDefault()'\n          \"\n        >\n          <svg\n            :style=\"{opacity: 0.4}\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"24\"\n            height=\"24\"\n            fill=\"currentColor\"\n            class=\"bi bi-arrow-up-short\"\n            viewBox=\"0 0 16 16\"\n            aria-hidden\n          >\n            <path\n              fill-rule=\"evenodd\"\n              d=\"M8 12a.5.5 0 0 0 .5-.5V5.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 5.707V11.5a.5.5 0 0 0 .5.5z\"\n            />\n          </svg>\n        </slot>\n      </template>\n    </template>\n    <template #custom-body=\"scope\">\n      <BTr v-if=\"busyModel\" class=\"b-table-busy-slot\" :class=\"getBusyRowClasses\">\n        <BTd :colspan=\"scope.fields.length\">\n          <slot name=\"table-busy\">\n            <BOverlay show>\n              <template #overlay>\n                <div class=\"d-flex align-items-center gap-2 mt-5\">\n                  <BSpinner />\n                  <strong>{{ props.busyLoadingText }}</strong>\n                </div>\n              </template>\n            </BOverlay>\n          </slot>\n        </BTd>\n      </BTr>\n    </template>\n  </BTableLite>\n</template>\n\n<script setup lang=\"ts\" generic=\"T\">\nimport {useToNumber} from '@vueuse/core'\nimport {computed, onMounted, type Ref, ref, watch} from 'vue'\nimport {formatItem} from '../../utils/formatItem'\nimport BOverlay from '../BOverlay/BOverlay.vue'\nimport BSpinner from '../BSpinner/BSpinner.vue'\nimport BTableLite from './BTableLite.vue'\nimport BTd from './BTd.vue'\nimport BTr from './BTr.vue'\nimport {\n  type BTableSortBy,\n  type BTableSortByOrder,\n  isTableField,\n  isTableItem,\n  type NoProviderTypes,\n  type TableField,\n  type TableFieldRaw,\n  type TableItem,\n  type TableRowType,\n  type TableStrictClassValue,\n} from '../../types/TableTypes'\nimport {useDefaults} from '../../composables/useDefaults'\nimport type {BTableProps} from '../../types/ComponentProps'\nimport {get, set} from '../../utils/object'\nimport {startCase} from '../../utils/stringUtils'\nimport {getTableFieldHeadLabel} from '../../utils/getTableFieldHeadLabel'\n\nconst _props = withDefaults(\n  defineProps<Omit<BTableProps<T>, 'sortBy' | 'busy' | 'selectedItems'>>(),\n  {\n    noSortableIcon: false,\n    perPage: Number.POSITIVE_INFINITY,\n    filter: undefined,\n    mustSort: false,\n    filterable: undefined,\n    provider: undefined,\n    noProvider: undefined,\n    noProviderPaging: false,\n    noProviderSorting: false,\n    multisort: false,\n    noProviderFiltering: false,\n    noLocalSorting: false,\n    noSelectOnClick: false,\n    selectable: false,\n    stickySelect: false,\n    selectHead: true,\n    selectMode: 'multi',\n    selectionVariant: 'primary',\n    busyLoadingText: 'Loading...',\n    currentPage: 1,\n    // BTableLite props\n    items: () => [],\n    fields: () => [],\n    // All others use defaults\n    caption: undefined,\n    align: undefined,\n    footClone: undefined,\n    labelStacked: undefined,\n    showEmpty: undefined,\n    emptyText: undefined,\n    emptyFilteredText: undefined,\n    fieldColumnClass: undefined,\n    tbodyTrClass: undefined,\n    captionHtml: undefined,\n    detailsTdClass: undefined,\n    headVariant: undefined,\n    headRowVariant: undefined,\n    footRowVariant: undefined,\n    footVariant: undefined,\n    modelValue: undefined,\n    primaryKey: undefined,\n    tbodyClass: undefined,\n    tfootClass: undefined,\n    tfootTrClass: undefined,\n    theadClass: undefined,\n    theadTrClass: undefined,\n    // End BTableLite props\n    // BTableSimple props\n    borderVariant: undefined,\n    variant: undefined,\n    bordered: undefined,\n    borderless: undefined,\n    captionTop: undefined,\n    dark: undefined,\n    hover: undefined,\n    id: undefined,\n    noBorderCollapse: undefined,\n    outlined: undefined,\n    fixed: undefined,\n    responsive: undefined,\n    stacked: undefined,\n    striped: undefined,\n    stripedColumns: undefined,\n    small: undefined,\n    stickyHeader: undefined,\n    // End BTableSimple props\n  }\n)\nconst props = useDefaults(_props, 'BTable')\n\nconst emit = defineEmits<{\n  'filtered': [value: T[]]\n  'head-clicked': [key: string, field: TableField<T>, event: MouseEvent, isFooter: boolean]\n  'row-clicked': [item: T, index: number, event: MouseEvent]\n  'row-dbl-clicked': [item: T, index: number, event: MouseEvent]\n  'row-hovered': [item: T, index: number, event: MouseEvent]\n  'row-unhovered': [item: T, index: number, event: MouseEvent]\n  'row-selected': [value: T]\n  'row-unselected': [value: T]\n  'sorted': [value: BTableSortBy]\n  'change': [value: T[]]\n}>()\n\nconst sortByModel = defineModel<BTableProps<T>['sortBy']>('sortBy', {\n  default: undefined,\n})\nconst busyModel = defineModel<Exclude<BTableProps<T>['busy'], undefined>>('busy', {\n  default: false,\n})\nconst selectedItemsModel = defineModel<Exclude<BTableProps<T>['selectedItems'], undefined>>(\n  'selectedItems',\n  {\n    default: () => [],\n  }\n)\n\nconst selectedItemsToSet = computed({\n  get: () => new Set([...selectedItemsModel.value]),\n  set: (val) => {\n    selectedItemsModel.value = [...val]\n  },\n})\n/**\n * This is to avoid the issue of directly mutating the array structure and to properly trigger the computed setter.\n * The utils also conveniently emit the proper events after\n */\nconst selectedItemsSetUtilities = {\n  add: (item: T) => {\n    const value = new Set(selectedItemsToSet.value)\n    value.add(item)\n    selectedItemsToSet.value = value\n    emit('row-selected', item)\n  },\n  clear: () => {\n    selectedItemsToSet.value.forEach((item) => {\n      selectedItemsSetUtilities.delete(item)\n    })\n  },\n  delete: (item: T) => {\n    const value = new Set(selectedItemsToSet.value)\n    if (props.primaryKey) {\n      const pkey: string = props.primaryKey\n      selectedItemsModel.value.forEach((v, i) => {\n        const selectedKey = get(v, pkey)\n        const itemKey = get(item, pkey)\n\n        if (!!selectedKey && !!itemKey && selectedKey === itemKey) {\n          value.delete(selectedItemsModel.value[i])\n        }\n      })\n    } else {\n      value.delete(item)\n    }\n    selectedItemsToSet.value = value\n    emit('row-unselected', item)\n  },\n  set: (items: T[]) => {\n    selectedItemsToSet.value = new Set(items)\n    selectedItemsToSet.value.forEach((item) => {\n      emit('row-unselected', item)\n    })\n  },\n  has: (item: T) => {\n    if (!props.primaryKey) return selectedItemsToSet.value.has(item)\n\n    // Resolver for when we are using primary keys\n    const pkey: string = props.primaryKey\n    for (const selected of selectedItemsToSet.value) {\n      const selectedKey = get(selected, pkey)\n      const itemKey = get(item, pkey)\n\n      if (!!selectedKey && !!itemKey && selectedKey === itemKey) return true\n    }\n    return false\n  },\n} as const\n\n/**\n * Only stores data that is fetched when using the provider\n */\nconst internalItems: Ref<T[]> = ref([])\n\nconst perPageNumber = useToNumber(() => props.perPage, {method: 'parseInt'})\nconst currentPageNumber = useToNumber(() => props.currentPage, {method: 'parseInt'})\n\nconst isFilterableTable = computed(() => !!props.filter)\nconst usesProvider = computed(() => props.provider !== undefined)\nconst isSelecting = computed(() => selectedItemsToSet.value.size > 0)\n\nconst isSortable = computed(\n  () =>\n    sortByModel.value !== undefined ||\n    props.fields.some(\n      (field) => typeof field === 'object' && field !== null && field.sortable === true\n    )\n)\n\nconst computedFields = computed<TableField<T>[]>(() =>\n  props.fields.map((el) => {\n    if (!isTableField(el)) {\n      const label = startCase(el as string)\n      return {\n        key: el as string,\n        label,\n        tdAttr: props.stacked === true ? {'data-label': label} : undefined,\n      }\n    }\n\n    const value = sortByModel.value?.find((sb) => el.key === sb.key)\n    const sortValue =\n      isSortable.value === false\n        ? undefined\n        : value === undefined\n          ? 'none'\n          : value.order === 'desc'\n            ? 'descending'\n            : value.order === 'asc'\n              ? 'ascending'\n              : 'none'\n\n    return {\n      ...(el as TableField<T>),\n      thAttr: {\n        'aria-sort': sortValue,\n        ...el.thAttr,\n      },\n    }\n  })\n)\n\nconst tableClasses = computed(() => ({\n  'b-table-busy': busyModel.value,\n  'b-table-selectable': props.selectable,\n  'user-select-none': props.selectable && isSelecting.value,\n}))\n\nconst getBusyRowClasses = computed(() => [\n  props.tbodyTrClass\n    ? typeof props.tbodyTrClass === 'function'\n      ? props.tbodyTrClass(null, 'table-busy')\n      : props.tbodyTrClass\n    : null,\n])\nconst getFieldColumnClasses = (field: TableField) => [\n  {\n    'b-table-sortable-column': isSortable.value && field.sortable,\n  },\n]\n// TODO this class has issues if the table has a variant already applied\n// Also the row should technically have aria-selected . Both things could probably just use a function with tbodyTrAttrs\n// But functional tbodyTrAttrs are not supported yet\n// Also the stuff for resolving functions could probably be made a util\nconst getRowClasses = (item: T | null, type: TableRowType): TableStrictClassValue => [\n  {\n    [`selected table-${props.selectionVariant}`]:\n      props.selectable && !!item && selectedItemsSetUtilities.has(item),\n  },\n  props.tbodyTrClass\n    ? typeof props.tbodyTrClass === 'function'\n      ? props.tbodyTrClass(item, type)\n      : props.tbodyTrClass\n    : null,\n]\n\nconst computedItems = computed<T[]>(() => {\n  const sortItems = (items: T[]) => {\n    // \"undefined\" values are set by us, we do this so we dont wipe out the comparer\n    const sortByItems = sortByModel.value?.filter((el) => !!el.order)\n\n    if (!sortByItems || sortByItems.length === 0) return items\n\n    // Multi-sort\n    return [...items].sort((a, b) => {\n      for (let i = 0; i < (sortByItems.length ?? 0); i++) {\n        const sortOption = sortByItems[i]\n        const realVal = (ob: T): string => {\n          if (!isTableItem(ob)) return String(ob)\n\n          const sortField = computedFields.value.find((el) => {\n            if (isTableField(el)) return el.key === sortOption.key\n\n            return false\n          })\n          const val = get(ob, sortOption.key as keyof TableItem)\n          if (isTableField(sortField) && !!sortField.sortByFormatted) {\n            const formatter =\n              typeof sortField.sortByFormatted === 'function'\n                ? sortField.sortByFormatted\n                : sortField.formatter\n            if (formatter) {\n              return formatItem(ob, String(sortField.key), formatter) as string\n            }\n          }\n          return typeof val === 'object' && val !== null\n            ? JSON.stringify(val)\n            : (val?.toString() ?? '')\n        }\n\n        const aValue = realVal(a)\n        const bValue = realVal(b)\n        const comparison = sortOption.comparer\n          ? sortOption.comparer(aValue, bValue)\n          : aValue.localeCompare(bValue, undefined, {numeric: true})\n\n        if (comparison !== 0) {\n          return sortOption.order === 'asc' ? comparison : -comparison\n        }\n      }\n      return 0 // items are equal\n    })\n  }\n\n  const filterItems = (items: T[]) =>\n    items.filter((item) =>\n      isTableItem(item)\n        ? Object.entries(item).some(([key, val]) => {\n            if (\n              val === null ||\n              val === undefined ||\n              key[0] === '_' ||\n              (!props.filterable?.includes(key) && !!props.filterable?.length)\n            )\n              return false\n            const realVal = (): string => {\n              const filterField = computedFields.value.find((el) => {\n                if (isTableField(el)) return el.key === key\n\n                return false\n              })\n              if (isTableField(filterField) && !!filterField.filterByFormatted) {\n                const formatter =\n                  typeof filterField.filterByFormatted === 'function'\n                    ? filterField.filterByFormatted\n                    : filterField.formatter\n                if (formatter) {\n                  return formatter(val, String(filterField.key), item) as string\n                }\n              }\n              return typeof val === 'object' ? JSON.stringify(Object.values(val)) : val.toString()\n            }\n            const itemValue: string = realVal()\n            return itemValue.toLowerCase().includes(props.filter?.toLowerCase() ?? '')\n          })\n        : true\n    )\n\n  let mappedItems = usesProvider.value ? internalItems.value : (props.items as T[])\n  mappedItems = mappedItems.map((item) => {\n    if (\n      typeof item === 'object' &&\n      item !== null &&\n      Object.keys(item).some((key) => key.includes('.'))\n    ) {\n      // We use any here because the TS doesn't isn't certain that \"item\" is the same type as our newItem.\n      // But we've determined that it's an object, so we can ignore it since they will always be the same \"object\"\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      let newItem: any = {}\n      for (const key in item) {\n        if (key.includes('.')) {\n          newItem = set(newItem, key, item[key])\n        } else {\n          newItem[key] = item[key]\n        }\n      }\n      return newItem\n      // return\n    }\n    return item\n  })\n\n  if (\n    (isFilterableTable.value === true && !usesProvider.value) ||\n    (isFilterableTable.value === true && usesProvider.value && props.noProviderFiltering)\n  ) {\n    mappedItems = filterItems(mappedItems)\n  }\n\n  if (\n    (isSortable.value === true && !usesProvider.value && !props.noLocalSorting) ||\n    (isSortable.value === true && usesProvider.value && props.noProviderSorting)\n  ) {\n    mappedItems = sortItems(mappedItems)\n  }\n\n  return mappedItems\n})\n\nconst computedDisplayItems = computed<T[]>(() => {\n  if (Number.isNaN(perPageNumber.value) || (usesProvider.value && !props.noProviderPaging)) {\n    return computedItems.value\n  }\n\n  return computedItems.value.slice(\n    (currentPageNumber.value - 1) * (perPageNumber.value || Number.POSITIVE_INFINITY),\n    currentPageNumber.value * (perPageNumber.value || Number.POSITIVE_INFINITY)\n  )\n})\n\nwatch(computedDisplayItems, (v) => {\n  emit('change', v)\n})\n\nconst handleRowSelection = (\n  row: T,\n  index: number,\n  shiftClicked = false,\n  ctrlClicked = false,\n  metaClicked = false\n) => {\n  if (!props.selectable) return\n\n  if (props.selectMode === 'single' || props.selectMode === 'multi') {\n    // Do nothing when these items are held\n    if (shiftClicked || ctrlClicked) return\n    // Delete if item is in\n    if (selectedItemsSetUtilities.has(row)) {\n      selectedItemsSetUtilities.delete(row)\n    } else {\n      if (props.selectMode === 'single') {\n        selectedItemsSetUtilities.set([row])\n      } else {\n        selectedItemsSetUtilities.add(row)\n      }\n    }\n  } else {\n    if (ctrlClicked || metaClicked) {\n      // Delete if in the object\n      if (selectedItemsSetUtilities.has(row)) {\n        selectedItemsSetUtilities.delete(row)\n        // Otherwise add. Functions similarly to 'multi' at this point\n      } else {\n        selectedItemsSetUtilities.add(row)\n      }\n      // This is where range is different, due to the difference in shift\n    } else if (shiftClicked) {\n      const lastSelectedItem = [...selectedItemsToSet.value].pop()\n      const lastSelectedIndex = computedItems.value.findIndex((i) => i === lastSelectedItem)\n      const selectStartIndex = Math.min(lastSelectedIndex, index)\n      const selectEndIndex = Math.max(lastSelectedIndex, index)\n      const items = computedItems.value.slice(selectStartIndex, selectEndIndex + 1)\n      selectedItemsSetUtilities.set(items)\n      // If nothing is being held, then we just behave like it's single mode\n    } else {\n      selectedItemsSetUtilities.set([row])\n    }\n  }\n}\n\nconst onRowClick = (row: T, index: number, e: MouseEvent) => {\n  if (props.noSelectOnClick === false) {\n    handleRowSelection(row, index, e.shiftKey, e.ctrlKey, e.metaKey)\n  }\n  emit('row-clicked', row, index, e)\n}\n\nconst handleFieldSorting = (field: TableField<T>) => {\n  if (!isSortable.value) return\n\n  const fieldKey = typeof field === 'object' && field !== null ? field.key : field\n  const fieldSortable = typeof field === 'object' && field !== null ? field.sortable : false\n\n  if (!(isSortable.value === true && fieldSortable === true)) return\n\n  const resolveOrder = (val: BTableSortByOrder): BTableSortByOrder | undefined => {\n    if (val === 'asc') return 'desc'\n    if (val === undefined) return 'asc'\n    if (\n      props.mustSort === true ||\n      (Array.isArray(props.mustSort) && props.mustSort.includes(fieldKey as string))\n    )\n      return 'asc'\n    return undefined\n  }\n\n  const index = sortByModel.value?.findIndex((el) => el.key === fieldKey) ?? -1\n  const originalValue = sortByModel.value?.[index]\n  const updatedValue: BTableSortBy =\n    // If value is new, we default to ascending\n    // Otherwise we make a temp copy of the value\n    index === -1 || !originalValue ? {key: fieldKey as string, order: 'asc'} : {...originalValue}\n\n  /**\n   * @returns the updated value to emit for sorted\n   */\n  const handleMultiSort = (): BTableSortBy => {\n    let val = updatedValue\n    if (index === -1) {\n      sortByModel.value = [...(sortByModel.value ?? []), updatedValue]\n    } else {\n      const order = resolveOrder(updatedValue.order)\n      val = {...updatedValue, order}\n      sortByModel.value = order\n        ? sortByModel.value?.map((el) => (el.key === val.key ? val : el))\n        : sortByModel.value?.filter((el) => el.key !== val.key)\n    }\n    return val\n  }\n\n  /**\n   * @returns the updated value to emit for sorted\n   */\n  const handleSingleSort = (): BTableSortBy => {\n    const val = {\n      ...updatedValue,\n      order: index === -1 ? updatedValue.order : resolveOrder(updatedValue.order),\n    }\n    sortByModel.value = [val]\n    return val\n  }\n\n  // Then emit the returned updated value\n  emit('sorted', props.multisort === true ? handleMultiSort() : handleSingleSort())\n}\n\nconst onFieldHeadClick = (\n  fieldKey: string,\n  field: TableField<T>,\n  event: Readonly<MouseEvent>,\n  isFooter = false\n) => {\n  emit('head-clicked', fieldKey, field, event, isFooter)\n  handleFieldSorting(field)\n}\n\nconst callItemsProvider = async () => {\n  if (!usesProvider.value || props.provider === undefined || busyModel.value) return\n  busyModel.value = true\n  const response = props.provider({\n    currentPage: currentPageNumber.value,\n    filter: props.filter,\n    sortBy: sortByModel.value,\n    perPage: perPageNumber.value,\n  })\n  try {\n    const items = response instanceof Promise ? await response : response\n\n    if (items === undefined) return\n    internalItems.value = items\n  } finally {\n    // Potential race condition could occur if the user explicitly sets the busy value to a different value while the response promise is executing\n    // which would have been the users choice.\n    // eslint-disable-next-line require-atomic-updates\n    busyModel.value = false\n  }\n}\n\nconst providerPropsWatch = async (prop: string, val: unknown, oldVal: unknown) => {\n  if (val === oldVal) return\n\n  //stop provide when paging\n  const inNoProvider = (key: NoProviderTypes) => props.noProvider?.includes(key) === true\n  const noProvideWhenPaging =\n    (prop === 'currentPage' || prop === 'perPage') &&\n    (inNoProvider('paging') || props.noProviderPaging === true)\n  const noProvideWhenFiltering =\n    prop === 'filter' && (inNoProvider('filtering') || props.noProviderFiltering === true)\n  const noProvideWhenSorting =\n    (prop === 'sortBy' || prop === 'sortDesc') &&\n    (inNoProvider('sorting') || props.noProviderSorting === true)\n\n  if (noProvideWhenPaging || noProvideWhenFiltering || noProvideWhenSorting) return\n\n  if (usesProvider.value === true) {\n    await callItemsProvider()\n  }\n\n  if (!(prop === 'currentPage' || prop === 'perPage')) {\n    emit('filtered', [...computedItems.value])\n  }\n}\n\nwatch(\n  () => props.filter,\n  (filter, oldFilter) => {\n    providerPropsWatch('filter', filter, oldFilter)\n\n    if (filter === oldFilter || usesProvider.value) return\n    if (!filter) {\n      emit('filtered', [...computedItems.value])\n    }\n  }\n)\nwatch(currentPageNumber, (val, oldVal) => {\n  providerPropsWatch('currentPage', val, oldVal)\n})\nwatch(perPageNumber, (val, oldVal) => {\n  providerPropsWatch('perPage', val, oldVal)\n})\nwatch(\n  sortByModel,\n  (val, oldVal) => {\n    providerPropsWatch('sortBy', val, oldVal)\n  },\n  {deep: true}\n)\n\nwatch(\n  () => props.provider,\n  (newValue) => {\n    // Reset the internal values if the provider stops getting used\n    if (newValue === undefined) {\n      internalItems.value = []\n      return\n    }\n    // Otherwise we should refresh the table on such a change\n    callItemsProvider()\n  }\n)\n\nonMounted(callItemsProvider)\n\ndefineExpose({\n  // The row selection methods are really for compat. Users should probably use the v-model though\n  clearSelected: () => {\n    if (!props.selectable) return\n    selectedItemsSetUtilities.clear()\n  },\n  refresh: callItemsProvider,\n  selectAllRows: () => {\n    if (!props.selectable) return\n    const unselectableItems = selectedItemsToSet.value.size > 0 ? [...selectedItemsToSet.value] : []\n    selectedItemsToSet.value = new Set([...computedItems.value])\n    selectedItemsToSet.value.forEach((item) => {\n      if (unselectableItems.includes(item)) return\n      emit('row-selected', item)\n    })\n  },\n  selectRow: (index: number) => {\n    if (!props.selectable) return\n    const item = computedItems.value[index]\n    if (!item || selectedItemsSetUtilities.has(item)) return\n    selectedItemsSetUtilities.add(item)\n  },\n  unselectRow: (index: number) => {\n    if (!props.selectable) return\n    const item = computedItems.value[index]\n    if (!item || !selectedItemsSetUtilities.has(item)) return\n    selectedItemsSetUtilities.delete(item)\n  },\n  isRowSelected: (index: number) => {\n    if (!props.selectable) return false\n    const item = computedItems.value[index]\n    return selectedItemsSetUtilities.has(item)\n  },\n})\n</script>\n"],"names":["_useModel","_a","_b"],"mappings":"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"}