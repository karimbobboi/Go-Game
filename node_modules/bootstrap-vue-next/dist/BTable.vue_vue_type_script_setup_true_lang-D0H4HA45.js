"use strict";const e=require("vue"),t=require("./object-B-6ddRYH.js"),l=require("./BOverlay.vue_vue_type_script_setup_true_lang-ikelLajh.js"),o=require("./BSpinner.vue_vue_type_script_setup_true_lang-BpcS7-mY.js"),a=require("./BTableSimple.vue_vue_type_script_setup_true_lang-Cybz9eNN.js"),r=require("./useDefaults-C2groUjC.js"),n=require("./stringUtils-D2ajpVM0.js"),s=require("./index-BInTFWT4.js"),d=(e,l,o)=>{const a=t.get(e,l);return o&&"function"==typeof o?o(a,l,e):a},i=e=>"object"==typeof e&&null!==e,u=e=>"object"==typeof e&&null!==e&&"key"in e,c=e.defineComponent({__name:"BTbody",props:{variant:{default:null}},setup(t){const l=t,o=r.useDefaults(l,"BTbody"),a=e.computed((()=>({[`thead-${o.variant}`]:null!==o.variant})));return(t,l)=>(e.openBlock(),e.createElementBlock("tbody",{class:e.normalizeClass(a.value)},[e.renderSlot(t.$slots,"default")],2))}}),f=["scope","colspan","rowspan","data-label"],v={key:0},p=e.defineComponent({__name:"BTd",props:{colspan:{default:void 0},rowspan:{default:void 0},stackedHeading:{default:void 0},stickyColumn:{type:Boolean,default:!1},variant:{default:null}},setup(t){const l=t,o=r.useDefaults(l,"BTd"),a=e.computed((()=>({[`table-${o.variant}`]:null!==o.variant,"b-table-sticky-column":o.stickyColumn,"table-b-table-default":o.stickyColumn&&null===o.variant}))),n=e.computed((()=>o.colspan?"colspan":o.rowspan?"rowspan":"col"));return(t,l)=>(e.openBlock(),e.createElementBlock("td",{scope:n.value,class:e.normalizeClass(a.value),colspan:e.unref(o).colspan,rowspan:e.unref(o).rowspan,"data-label":e.unref(o).stackedHeading},[e.unref(o).stackedHeading?(e.openBlock(),e.createElementBlock("div",v,[e.renderSlot(t.$slots,"default")])):e.renderSlot(t.$slots,"default",{key:1})],10,f))}}),y=e.defineComponent({__name:"BTfoot",props:{variant:{default:null}},setup(t){const l=t,o=r.useDefaults(l,"BTfoot"),a=e.computed((()=>({[`table-${o.variant}`]:null!==o.variant})));return(t,l)=>(e.openBlock(),e.createElementBlock("tfoot",{class:e.normalizeClass(a.value)},[e.renderSlot(t.$slots,"default")],2))}}),m=["scope","colspan","rowspan","data-label"],b={key:0},k=e.defineComponent({__name:"BTh",props:{colspan:{default:void 0},rowspan:{default:void 0},stackedHeading:{default:void 0},stickyColumn:{type:Boolean,default:!1},variant:{default:null}},setup(t){const l=t,o=r.useDefaults(l,"BTh"),a=e.computed((()=>({[`table-${o.variant}`]:null!==o.variant,"b-table-sticky-column":o.stickyColumn,"table-b-table-default":o.stickyColumn&&null===o.variant}))),n=e.computed((()=>o.colspan?"colspan":o.rowspan?"rowspan":"col"));return(t,l)=>(e.openBlock(),e.createElementBlock("th",{scope:n.value,class:e.normalizeClass(a.value),colspan:e.unref(o).colspan,rowspan:e.unref(o).rowspan,"data-label":e.unref(o).stackedHeading},[void 0!==e.unref(o).stackedHeading?(e.openBlock(),e.createElementBlock("div",b,[e.renderSlot(t.$slots,"default")])):e.renderSlot(t.$slots,"default",{key:1})],10,m))}}),g=e.defineComponent({__name:"BThead",props:{variant:{default:null}},setup(t){const l=t,o=r.useDefaults(l,"BThead"),a=e.computed((()=>({[`table-${o.variant}`]:null!==o.variant})));return(t,l)=>(e.openBlock(),e.createElementBlock("thead",{class:e.normalizeClass(a.value)},[e.renderSlot(t.$slots,"default")],2))}}),h=e.defineComponent({__name:"BTr",props:{variant:{default:null}},setup(t){const l=t,o=r.useDefaults(l,"BTr"),a=e.computed((()=>({[`table-${o.variant}`]:null!==o.variant})));return(t,l)=>(e.openBlock(),e.createElementBlock("tr",{class:e.normalizeClass(a.value)},[e.renderSlot(t.$slots,"default")],2))}}),B=e=>"string"==typeof e?n.titleCase(e):void 0!==e.label?e.label:"string"==typeof e.key?n.titleCase(e.key):e.key,C=["TD","TH","TR"],w=["a","a *","button","button *","input:not(.disabled):not([disabled])","select:not(.disabled):not([disabled])","textarea:not(.disabled):not([disabled])",'[role="link"]','[role="link"] *','[role="button"]','[role="button"] *',"[tabindex]:not(.disabled):not([disabled])"].join(","),S=e=>{if(!e||!e.target)return!1;const t=e.target;if("disabled"in t&&t.disabled||-1!==C.indexOf(t.tagName))return!1;if(t.closest(".dropdown-menu"))return!0;const l="LABEL"===t.tagName?t:t.closest("label");if(l){const e=l.getAttribute("for"),t=e?document.getElementById(e):l.querySelector("input, select, textarea");if(t&&!t.disabled)return!0}return t.matches(w)},_={key:0,class:"b-table-stacked-label"},T={class:"d-inline-flex flex-nowrap align-items-center gap-1"},$={key:2},x=e.defineComponent({__name:"BTableLite",props:{align:{default:void 0},caption:{default:void 0},captionHtml:{default:void 0},detailsTdClass:{default:void 0},emptyFilteredText:{default:"There are no records matching your request"},emptyText:{default:"There are no records to show"},fieldColumnClass:{type:[Function,String,Object,Array],default:void 0},fields:{default:()=>[]},footClone:{type:Boolean,default:!1},footRowVariant:{default:void 0},footVariant:{default:void 0},headRowVariant:{default:void 0},headVariant:{default:void 0},items:{default:()=>[]},labelStacked:{type:Boolean,default:!1},modelValue:{default:void 0},primaryKey:{default:void 0},showEmpty:{type:Boolean,default:!1},tbodyClass:{default:void 0},tbodyTrAttrs:{type:[Function,Object],default:void 0},tbodyTrClass:{type:[Function,String,Array,Object],default:void 0},tfootClass:{default:void 0},tfootTrClass:{default:void 0},theadClass:{default:void 0},theadTrClass:{default:void 0},bordered:{type:Boolean,default:void 0},borderless:{type:Boolean,default:void 0},borderVariant:{default:void 0},captionTop:{type:Boolean,default:void 0},dark:{type:Boolean,default:void 0},fixed:{type:Boolean,default:void 0},hover:{type:Boolean,default:void 0},id:{default:void 0},noBorderCollapse:{type:Boolean,default:void 0},outlined:{type:Boolean,default:void 0},responsive:{type:[Boolean,String],default:void 0},small:{type:Boolean,default:void 0},stacked:{type:[Boolean,String],default:void 0},stickyHeader:{type:[Boolean,String,Number],default:void 0},striped:{type:Boolean,default:void 0},stripedColumns:{type:Boolean,default:void 0},variant:{default:void 0},tableAttrs:{},tableClass:{default:void 0}},emits:["head-clicked","row-clicked","row-dbl-clicked","row-hovered","row-unhovered"],setup(l,{emit:o}){const s=l,f=r.useDefaults(s,"BTableLite"),v=o,m=e.ref(new WeakMap);e.watch((()=>f.items),(e=>{e.forEach((e=>{i(e)&&m.value.set(...(e=>[e,e._showDetails])(e))}))}),{deep:!0,immediate:!0});const b=e.computed((()=>[f.tableClass,{[`align-${f.align}`]:void 0!==f.align}])),C=e.computed((()=>{if(!f.fields.length&&f.items.length){const[e]=f.items;return i(e)||Array.isArray(e)?Object.keys(e).map((e=>{const t=n.startCase(e);return{key:e,label:t,tdAttr:!0===f.stacked?{"data-label":t}:void 0}})):[{key:"",_noHeader:!0}]}return f.fields.map((e=>{if(u(e))return{...e,tdAttr:!0===f.stacked?{"data-label":n.startCase(e.key),...e.tdAttr}:e.tdAttr};const t=n.startCase(e);return{key:e,label:t,tdAttr:!0===f.stacked?{"data-label":t}:void 0}}))})),w=e.computed((()=>C.value.length)),x=e.computed((()=>!(C.value.length>0&&C.value.every((e=>!0===e._noHeader))))),V=(e,l,o)=>{const a=String(l.key),r=t.get(e,a);return l.thAttr&&"function"==typeof l.thAttr?l.thAttr(r,a,e,o):l.thAttr},N=(e,t,l=!1)=>{v("head-clicked",e.key,e,t,l)},P=e=>{if(i(e)){const t=m.value.get(e);m.value.set(e,!t),e._showDetails=!t}},E=e=>[e.class,e.thClass,{"b-table-sticky-column":e.stickyColumn},f.fieldColumnClass?"function"==typeof f.fieldColumnClass?f.fieldColumnClass(e):f.fieldColumnClass:null],A=(e,l)=>{var o,a;const r=t.get(l,String(e.key));return[e.class,"function"==typeof e.tdClass?e.tdClass(r,String(e.key),l):e.tdClass,i(l)&&(null==(o=l._cellVariants)?void 0:o[e.key])?`table-${null==(a=l._cellVariants)?void 0:a[e.key]}`:null,{"b-table-sticky-column":e.stickyColumn}]},D=(e,t)=>f.tbodyTrAttrs?"function"==typeof f.tbodyTrAttrs?f.tbodyTrAttrs(e,t):f.tbodyTrAttrs:null,F=(e,t)=>f.tbodyTrClass?"function"==typeof f.tbodyTrClass?f.tbodyTrClass(e,t):f.tbodyTrClass:null;return(l,o)=>(e.openBlock(),e.createBlock(a._sfc_main,{id:e.unref(f).id,bordered:e.unref(f).bordered,borderless:e.unref(f).borderless,"border-variant":e.unref(f).borderVariant,"caption-top":e.unref(f).captionTop,dark:e.unref(f).dark,fixed:e.unref(f).fixed,hover:e.unref(f).hover,"no-border-collapse":e.unref(f).noBorderCollapse,outlined:e.unref(f).outlined,responsive:e.unref(f).responsive,small:e.unref(f).small,stacked:e.unref(f).stacked,"sticky-header":e.unref(f).stickyHeader,striped:e.unref(f).striped,"table-class":b.value,variant:e.unref(f).variant,"striped-columns":e.unref(f).stripedColumns},{default:e.withCtx((()=>[e.withDirectives(e.createVNode(g,{variant:e.unref(f).headVariant,class:e.normalizeClass(e.unref(f).theadClass)},{default:e.withCtx((()=>[l.$slots["thead-top"]?e.renderSlot(l.$slots,"thead-top",{key:0}):e.createCommentVNode("",!0),e.createVNode(h,{variant:e.unref(f).headRowVariant,class:e.normalizeClass(e.unref(f).theadTrClass)},{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(C.value,(t=>(e.openBlock(),e.createBlock(k,e.mergeProps({key:t.key,scope:"col",class:E(t),title:t.headerTitle,variant:t.variant,abbr:t.headerAbbr,style:t.thStyle,ref_for:!0},V(null,t,"top"),{onClick:e=>N(t,e)}),{default:e.withCtx((()=>[e.renderSlot(l.$slots,l.$slots[`head(${String(t.key)})`]?`head(${String(t.key)})`:"head()",{label:t.label,column:t.key,field:t,isFoot:!1},(()=>[e.createTextVNode(e.toDisplayString(e.unref(B)(t)),1)]))])),_:2},1040,["class","title","variant","abbr","style","onClick"])))),128))])),_:3},8,["variant","class"]),l.$slots["thead-sub"]?(e.openBlock(),e.createBlock(h,{key:1},{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(C.value,(t=>(e.openBlock(),e.createBlock(p,{key:t.key,scope:"col",variant:t.variant,class:e.normalizeClass([t.class,t.thClass])},{default:e.withCtx((()=>[e.renderSlot(l.$slots,"thead-sub",e.mergeProps({items:C.value,ref_for:!0},t),(()=>[e.createTextVNode(e.toDisplayString(t.label),1)]))])),_:2},1032,["variant","class"])))),128))])),_:3})):e.createCommentVNode("",!0)])),_:3},8,["variant","class"]),[[e.vShow,x.value]]),e.createVNode(c,{class:e.normalizeClass(e.unref(f).tbodyClass)},{default:e.withCtx((()=>[e.renderSlot(l.$slots,"custom-body",{fields:C.value,items:e.unref(f).items,columns:C.value.length},(()=>[!e.unref(f).stacked&&l.$slots["top-row"]?(e.openBlock(),e.createBlock(h,e.mergeProps({key:0,class:F(null,"row-top")},D(null,"row-top")),{default:e.withCtx((()=>[e.renderSlot(l.$slots,"top-row")])),_:3},16,["class"])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(f).items,((o,a)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:e.unref(f).primaryKey?e.unref(t.get)(o,e.unref(f).primaryKey):a},[e.createVNode(h,e.mergeProps({class:F(o,"row"),variant:e.unref(i)(o)?o._rowVariant:void 0,ref_for:!0},D(o,"row"),{onClick:t=>!e.unref(S)(t)&&v("row-clicked",o,a,t),onDblclick:t=>!e.unref(S)(t)&&v("row-dbl-clicked",o,a,t),onMouseenter:t=>!e.unref(S)(t)&&v("row-hovered",o,a,t),onMouseleave:t=>!e.unref(S)(t)&&v("row-unhovered",o,a,t)}),{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(C.value,(r=>{var n;return e.openBlock(),e.createBlock(p,e.mergeProps({key:r.key,variant:e.unref(i)(o)&&(null==(n=o._cellVariants)?void 0:n[r.key])?null:r.variant,class:A(r,o),ref_for:!0},((e,l,o)=>{const a=t.get(e,l);return o&&"function"==typeof o?o(a,l,e):o})(o,String(r.key),r.tdAttr)),{default:e.withCtx((()=>[e.unref(f).stacked&&e.unref(f).labelStacked?(e.openBlock(),e.createElementBlock("label",_,e.toDisplayString(e.unref(B)(r)),1)):e.createCommentVNode("",!0),e.renderSlot(l.$slots,l.$slots[`cell(${String(r.key)})`]?`cell(${String(r.key)})`:"cell()",{value:e.unref(d)(o,String(r.key),r.formatter),unformatted:e.unref(t.get)(o,String(r.key)),index:a,item:o,field:r,items:l.items,toggleDetails:()=>{P(o)},detailsShowing:!!e.unref(i)(o)&&(m.value.get(o)??!1)},(()=>[l.$slots[`cell(${String(r.key)})`]||l.$slots["cell()"]?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(e.toDisplayString(e.unref(d)(o,String(r.key),r.formatter)),1)],64))]))])),_:2},1040,["variant","class"])})),128))])),_:2},1040,["class","variant","onClick","onDblclick","onMouseenter","onMouseleave"]),e.unref(i)(o)&&!0===m.value.get(o)&&l.$slots["row-details"]?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(h,{"aria-hidden":"true",role:"presentation",class:"d-none"}),e.createVNode(h,e.mergeProps({class:F(o,"row-details"),variant:o._rowVariant,ref_for:!0},D(o,"row-details")),{default:e.withCtx((()=>[e.createVNode(p,{colspan:w.value,class:e.normalizeClass(l.detailsTdClass)},{default:e.withCtx((()=>[e.renderSlot(l.$slots,"row-details",{item:o,toggleDetails:()=>{P(o)},fields:e.unref(f).fields,index:a})])),_:2},1032,["colspan","class"])])),_:2},1040,["class","variant"])],64)):e.createCommentVNode("",!0)],64)))),128)),e.unref(f).showEmpty&&0===e.unref(f).items.length?(e.openBlock(),e.createBlock(h,{key:1,class:"b-table-empty-slot"},{default:e.withCtx((()=>[e.createVNode(p,{colspan:w.value},{default:e.withCtx((()=>[e.renderSlot(l.$slots,"empty",{items:e.unref(f).items},(()=>[e.createTextVNode(e.toDisplayString(e.unref(f).emptyText),1)]))])),_:3},8,["colspan"])])),_:3})):e.createCommentVNode("",!0),!e.unref(f).stacked&&l.$slots["bottom-row"]?(e.openBlock(),e.createBlock(h,e.mergeProps({key:2,class:["bottom-row",F(null,"row-bottom")]},D(null,"row-bottom")),{default:e.withCtx((()=>[e.renderSlot(l.$slots,"bottom-row")])),_:3},16,["class"])):e.createCommentVNode("",!0)]))])),_:3},8,["class"]),e.unref(f).footClone?(e.openBlock(),e.createBlock(y,{key:0,variant:e.unref(f).footVariant,class:e.normalizeClass(e.unref(f).tfootClass)},{default:e.withCtx((()=>[e.createVNode(h,{variant:e.unref(f).footRowVariant,class:e.normalizeClass(e.unref(f).tfootTrClass)},{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(C.value,(t=>(e.openBlock(),e.createBlock(k,e.mergeProps({key:t.key,scope:"col",class:E(t),title:t.headerTitle,abbr:t.headerAbbr,style:t.thStyle,variant:t.variant,ref_for:!0},V(null,t,"bottom"),{onClick:e=>N(t,e,!0)}),{default:e.withCtx((()=>[e.createElementVNode("div",T,[e.createElementVNode("div",null,[e.renderSlot(l.$slots,l.$slots[`foot(${String(t.key)})`]?`foot(${String(t.key)})`:"foot()",{label:t.label,column:t.key,field:t,isFoot:!0},(()=>[e.createTextVNode(e.toDisplayString(e.unref(B)(t)),1)]))])])])),_:2},1040,["class","title","abbr","style","variant","onClick"])))),128))])),_:3},8,["variant","class"])])),_:3},8,["variant","class"])):l.$slots["custom-foot"]?(e.openBlock(),e.createBlock(y,{key:1},{default:e.withCtx((()=>[e.renderSlot(l.$slots,"custom-foot",{fields:C.value,items:e.unref(f).items,columns:C.value.length})])),_:3})):e.createCommentVNode("",!0),l.$slots["table-caption"]||e.unref(f).caption?(e.openBlock(),e.createElementBlock("caption",$,[e.renderSlot(l.$slots,"table-caption",{},(()=>[e.createTextVNode(e.toDisplayString(e.unref(f).caption),1)]))])):e.createCommentVNode("",!0)])),_:3},8,["id","bordered","borderless","border-variant","caption-top","dark","fixed","hover","no-border-collapse","outlined","responsive","small","stacked","sticky-header","striped","table-class","variant","striped-columns"]))}}),V={style:{opacity:.4},xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-arrow-up-short",viewBox:"0 0 16 16","aria-hidden":""},N={class:"d-flex align-items-center gap-2 mt-5"},P=e.defineComponent({__name:"BTable",props:e.mergeModels({provider:{default:void 0},noProvider:{default:void 0},noProviderPaging:{type:Boolean,default:!1},noProviderSorting:{type:Boolean,default:!1},noProviderFiltering:{type:Boolean,default:!1},mustSort:{type:[Boolean,Array],default:!1},selectable:{type:Boolean,default:!1},multisort:{type:Boolean,default:!1},stickySelect:{type:Boolean,default:!1},selectHead:{type:[Boolean,String],default:!0},selectMode:{default:"multi"},selectionVariant:{default:"primary"},busyLoadingText:{default:"Loading..."},perPage:{default:Number.POSITIVE_INFINITY},currentPage:{default:1},filter:{default:void 0},filterable:{default:void 0},noLocalSorting:{type:Boolean,default:!1},noSelectOnClick:{type:Boolean,default:!1},noSortableIcon:{type:Boolean,default:!1},align:{default:void 0},caption:{default:void 0},captionHtml:{default:void 0},detailsTdClass:{default:void 0},emptyFilteredText:{default:void 0},emptyText:{default:void 0},fieldColumnClass:{type:[Function,String,Object,Array],default:void 0},fields:{default:()=>[]},footClone:{type:Boolean,default:void 0},footRowVariant:{default:void 0},footVariant:{default:void 0},headRowVariant:{default:void 0},headVariant:{default:void 0},items:{default:()=>[]},labelStacked:{type:Boolean,default:void 0},modelValue:{default:void 0},primaryKey:{default:void 0},showEmpty:{type:Boolean,default:void 0},tbodyClass:{default:void 0},tbodyTrAttrs:{},tbodyTrClass:{type:[Function,String,Array,Object],default:void 0},tfootClass:{default:void 0},tfootTrClass:{default:void 0},theadClass:{default:void 0},theadTrClass:{default:void 0},bordered:{type:Boolean,default:void 0},borderless:{type:Boolean,default:void 0},borderVariant:{default:void 0},captionTop:{type:Boolean,default:void 0},dark:{type:Boolean,default:void 0},fixed:{type:Boolean,default:void 0},hover:{type:Boolean,default:void 0},id:{default:void 0},noBorderCollapse:{type:Boolean,default:void 0},outlined:{type:Boolean,default:void 0},responsive:{type:[Boolean,String],default:void 0},small:{type:Boolean,default:void 0},stacked:{type:[Boolean,String],default:void 0},stickyHeader:{type:[Boolean,String,Number],default:void 0},striped:{type:Boolean,default:void 0},stripedColumns:{type:Boolean,default:void 0},variant:{default:void 0},tableAttrs:{}},{sortBy:{default:void 0},sortByModifiers:{},busy:{type:Boolean,default:!1},busyModifiers:{},selectedItems:{default:()=>[]},selectedItemsModifiers:{}}),emits:e.mergeModels(["filtered","head-clicked","row-clicked","row-dbl-clicked","row-hovered","row-unhovered","row-selected","row-unselected","sorted","change"],["update:sortBy","update:busy","update:selectedItems"]),setup(a,{expose:c,emit:f}){const v=a,y=r.useDefaults(v,"BTable"),m=f,b=e.useModel(a,"sortBy"),k=e.useModel(a,"busy"),g=e.useModel(a,"selectedItems"),C=e.computed({get:()=>new Set([...g.value]),set:e=>{g.value=[...e]}}),w={add:e=>{const t=new Set(C.value);t.add(e),C.value=t,m("row-selected",e)},clear:()=>{C.value.forEach((e=>{w.delete(e)}))},delete:e=>{const l=new Set(C.value);if(y.primaryKey){const o=y.primaryKey;g.value.forEach(((a,r)=>{const n=t.get(a,o),s=t.get(e,o);n&&s&&n===s&&l.delete(g.value[r])}))}else l.delete(e);C.value=l,m("row-unselected",e)},set:e=>{C.value=new Set(e),C.value.forEach((e=>{m("row-unselected",e)}))},has:e=>{if(!y.primaryKey)return C.value.has(e);const l=y.primaryKey;for(const o of C.value){const a=t.get(o,l),r=t.get(e,l);if(a&&r&&a===r)return!0}return!1}},S=e.ref([]),_=s.useToNumber((()=>y.perPage),{method:"parseInt"}),T=s.useToNumber((()=>y.currentPage),{method:"parseInt"}),$=e.computed((()=>!!y.filter)),P=e.computed((()=>void 0!==y.provider)),E=e.computed((()=>C.value.size>0)),A=e.computed((()=>void 0!==b.value||y.fields.some((e=>"object"==typeof e&&null!==e&&!0===e.sortable)))),D=e.computed((()=>y.fields.map((e=>{var t;if(!u(e)){const t=n.startCase(e);return{key:e,label:t,tdAttr:!0===y.stacked?{"data-label":t}:void 0}}const l=null==(t=b.value)?void 0:t.find((t=>e.key===t.key)),o=!1===A.value?void 0:void 0===l?"none":"desc"===l.order?"descending":"asc"===l.order?"ascending":"none";return{...e,thAttr:{"aria-sort":o,...e.thAttr}}})))),F=e.computed((()=>({"b-table-busy":k.value,"b-table-selectable":y.selectable,"user-select-none":y.selectable&&E.value}))),j=e.computed((()=>[y.tbodyTrClass?"function"==typeof y.tbodyTrClass?y.tbodyTrClass(null,"table-busy"):y.tbodyTrClass:null])),I=e=>[{"b-table-sortable-column":A.value&&e.sortable}],z=(e,t)=>[{[`selected table-${y.selectionVariant}`]:y.selectable&&!!e&&w.has(e)},y.tbodyTrClass?"function"==typeof y.tbodyTrClass?y.tbodyTrClass(e,t):y.tbodyTrClass:null],M=e.computed((()=>{let e=P.value?S.value:y.items;return e=e.map((e=>{if("object"==typeof e&&null!==e&&Object.keys(e).some((e=>e.includes(".")))){let l={};for(const o in e)o.includes(".")?l=t.set(l,o,e[o]):l[o]=e[o];return l}return e})),(!0===$.value&&!P.value||!0===$.value&&P.value&&y.noProviderFiltering)&&(e=e.filter((e=>!i(e)||Object.entries(e).some((([t,l])=>{var o,a,r;return!(null==l||"_"===t[0]||!(null==(o=y.filterable)?void 0:o.includes(t))&&(null==(a=y.filterable)?void 0:a.length))&&(()=>{const o=D.value.find((e=>!!u(e)&&e.key===t));if(u(o)&&o.filterByFormatted){const t="function"==typeof o.filterByFormatted?o.filterByFormatted:o.formatter;if(t)return t(l,String(o.key),e)}return"object"==typeof l?JSON.stringify(Object.values(l)):l.toString()})().toLowerCase().includes((null==(r=y.filter)?void 0:r.toLowerCase())??"")}))))),(!0===A.value&&!P.value&&!y.noLocalSorting||!0===A.value&&P.value&&y.noProviderSorting)&&(e=(e=>{var l;const o=null==(l=b.value)?void 0:l.filter((e=>!!e.order));return o&&0!==o.length?[...e].sort(((e,l)=>{for(let a=0;a<(o.length??0);a++){const r=o[a],n=e=>{if(!i(e))return String(e);const l=D.value.find((e=>!!u(e)&&e.key===r.key)),o=t.get(e,r.key);if(u(l)&&l.sortByFormatted){const t="function"==typeof l.sortByFormatted?l.sortByFormatted:l.formatter;if(t)return d(e,String(l.key),t)}return"object"==typeof o&&null!==o?JSON.stringify(o):(null==o?void 0:o.toString())??""},s=n(e),c=n(l),f=r.comparer?r.comparer(s,c):s.localeCompare(c,void 0,{numeric:!0});if(0!==f)return"asc"===r.order?f:-f}return 0})):e})(e)),e})),L=e.computed((()=>Number.isNaN(_.value)||P.value&&!y.noProviderPaging?M.value:M.value.slice((T.value-1)*(_.value||Number.POSITIVE_INFINITY),T.value*(_.value||Number.POSITIVE_INFINITY))));e.watch(L,(e=>{m("change",e)}));const O=(e,t,l)=>{!1===y.noSelectOnClick&&((e,t,l=!1,o=!1,a=!1)=>{if(y.selectable)if("single"===y.selectMode||"multi"===y.selectMode){if(l||o)return;w.has(e)?w.delete(e):"single"===y.selectMode?w.set([e]):w.add(e)}else if(o||a)w.has(e)?w.delete(e):w.add(e);else if(l){const e=[...C.value].pop(),l=M.value.findIndex((t=>t===e)),o=Math.min(l,t),a=Math.max(l,t),r=M.value.slice(o,a+1);w.set(r)}else w.set([e])})(e,t,l.shiftKey,l.ctrlKey,l.metaKey),m("row-clicked",e,t,l)},H=(e,t,l,o=!1)=>{m("head-clicked",e,t,l,o),(e=>{var t,l;if(!A.value)return;const o="object"==typeof e&&null!==e?e.key:e,a="object"==typeof e&&null!==e&&e.sortable;if(!0!==A.value||!0!==a)return;const r=e=>"asc"===e?"desc":void 0===e||!0===y.mustSort||Array.isArray(y.mustSort)&&y.mustSort.includes(o)?"asc":void 0,n=(null==(t=b.value)?void 0:t.findIndex((e=>e.key===o)))??-1,s=null==(l=b.value)?void 0:l[n],d=-1!==n&&s?{...s}:{key:o,order:"asc"};m("sorted",!0===y.multisort?(()=>{var e,t;let l=d;if(-1===n)b.value=[...b.value??[],d];else{const o=r(d.order);l={...d,order:o},b.value=o?null==(e=b.value)?void 0:e.map((e=>e.key===l.key?l:e)):null==(t=b.value)?void 0:t.filter((e=>e.key!==l.key))}return l})():(()=>{const e={...d,order:-1===n?d.order:r(d.order)};return b.value=[e],e})())})(t)},R=async()=>{if(!P.value||void 0===y.provider||k.value)return;k.value=!0;const e=y.provider({currentPage:T.value,filter:y.filter,sortBy:b.value,perPage:_.value});try{const t=e instanceof Promise?await e:e;if(void 0===t)return;S.value=t}finally{k.value=!1}},K=async(e,t,l)=>{if(t===l)return;const o=e=>{var t;return!0===(null==(t=y.noProvider)?void 0:t.includes(e))},a=("currentPage"===e||"perPage"===e)&&(o("paging")||!0===y.noProviderPaging),r="filter"===e&&(o("filtering")||!0===y.noProviderFiltering),n=("sortBy"===e||"sortDesc"===e)&&(o("sorting")||!0===y.noProviderSorting);a||r||n||(!0===P.value&&await R(),"currentPage"!==e&&"perPage"!==e&&m("filtered",[...M.value]))};return e.watch((()=>y.filter),((e,t)=>{K("filter",e,t),e===t||P.value||e||m("filtered",[...M.value])})),e.watch(T,((e,t)=>{K("currentPage",e,t)})),e.watch(_,((e,t)=>{K("perPage",e,t)})),e.watch(b,((e,t)=>{K("sortBy",e,t)}),{deep:!0}),e.watch((()=>y.provider),(e=>{void 0!==e?R():S.value=[]})),e.onMounted(R),c({clearSelected:()=>{y.selectable&&w.clear()},refresh:R,selectAllRows:()=>{if(!y.selectable)return;const e=C.value.size>0?[...C.value]:[];C.value=new Set([...M.value]),C.value.forEach((t=>{e.includes(t)||m("row-selected",t)}))},selectRow:e=>{if(!y.selectable)return;const t=M.value[e];t&&!w.has(t)&&w.add(t)},unselectRow:e=>{if(!y.selectable)return;const t=M.value[e];t&&w.has(t)&&w.delete(t)},isRowSelected:e=>{if(!y.selectable)return!1;const t=M.value[e];return w.has(t)}}),(t,a)=>(e.openBlock(),e.createBlock(x,e.mergeProps(e.unref(y),{"aria-busy":k.value,items:L.value,fields:D.value,"table-class":F.value,"tbody-tr-class":z,"field-column-class":I,onHeadClicked:H,onRowDblClicked:a[0]||(a[0]=(e,t,l)=>{m("row-dbl-clicked",e,t,l)}),onRowClicked:O,onRowHovered:a[1]||(a[1]=(e,t,l)=>{m("row-hovered",e,t,l)}),onRowUnhovered:a[2]||(a[2]=(e,t,l)=>{m("row-unhovered",e,t,l)})}),e.createSlots({"custom-body":e.withCtx((a=>[k.value?(e.openBlock(),e.createBlock(h,{key:0,class:e.normalizeClass(["b-table-busy-slot",j.value])},{default:e.withCtx((()=>[e.createVNode(p,{colspan:a.fields.length},{default:e.withCtx((()=>[e.renderSlot(t.$slots,"table-busy",{},(()=>[e.createVNode(l._sfc_main,{show:""},{overlay:e.withCtx((()=>[e.createElementVNode("div",N,[e.createVNode(o._sfc_main),e.createElementVNode("strong",null,e.toDisplayString(e.unref(y).busyLoadingText),1)])])),_:1})]))])),_:2},1032,["colspan"])])),_:2},1032,["class"])):e.createCommentVNode("",!0)])),_:2},[e.renderList(t.$slots,((l,o)=>({name:o,fn:e.withCtx((l=>[e.renderSlot(t.$slots,o,e.normalizeProps(e.guardReactiveProps(l)))]))}))),e.renderList(D.value,(l=>({name:`head(${String(l.key)})`,fn:e.withCtx((o=>{var r,n,s,d;return[e.renderSlot(t.$slots,t.$slots[`head(${String(l.key)})`]?`head(${String(l.key)})`:"head()",e.normalizeProps(e.guardReactiveProps(o)),(()=>[e.createTextVNode(e.toDisplayString(e.unref(B)(l)),1)])),A.value&&o.field.sortable&&!1===e.unref(y).noSortableIcon?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},["asc"===(null==(n=null==(r=b.value)?void 0:r.find((e=>e.key===o.field.key)))?void 0:n.order)?e.renderSlot(t.$slots,t.$slots[`sortAsc(${String(o.field.key)})`]?`sortAsc(${String(o.field.key)})`:"sortAsc()",e.normalizeProps(e.mergeProps({key:0},{...o})),(()=>[a[3]||(a[3]=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-arrow-up-short",viewBox:"0 0 16 16","aria-hidden":""},[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M8 12a.5.5 0 0 0 .5-.5V5.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 5.707V11.5a.5.5 0 0 0 .5.5z"})],-1))])):"desc"===(null==(d=null==(s=b.value)?void 0:s.find((e=>e.key===o.field.key)))?void 0:d.order)?e.renderSlot(t.$slots,t.$slots[`sortDesc(${String(o.field.key)})`]?`sortDesc(${String(o.field.key)})`:"sortDesc()",e.normalizeProps(e.mergeProps({key:1},{...o})),(()=>[a[4]||(a[4]=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:"bi bi-arrow-down-short",viewBox:"0 0 16 16","aria-hidden":""},[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M8 4a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5A.5.5 0 0 1 8 4z"})],-1))])):e.renderSlot(t.$slots,t.$slots[`sortDefault(${String(o.field.key)})`]?`sortDefault(${String(o.field.key)})`:"sortDefault()",e.normalizeProps(e.mergeProps({key:2},{...o})),(()=>[(e.openBlock(),e.createElementBlock("svg",V,a[5]||(a[5]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M8 12a.5.5 0 0 0 .5-.5V5.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 5.707V11.5a.5.5 0 0 0 .5.5z"},null,-1)])))]))],64)):e.createCommentVNode("",!0)]}))})))]),1040,["aria-busy","items","fields","table-class"]))}});exports._sfc_main=P,exports._sfc_main$1=x,exports._sfc_main$2=c,exports._sfc_main$3=p,exports._sfc_main$4=y,exports._sfc_main$5=k,exports._sfc_main$6=g,exports._sfc_main$7=h;
//# sourceMappingURL=BTable.vue_vue_type_script_setup_true_lang-D0H4HA45.js.map
