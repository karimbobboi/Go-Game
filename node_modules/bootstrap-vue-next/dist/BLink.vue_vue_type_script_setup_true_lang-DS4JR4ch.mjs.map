{"version":3,"file":"BLink.vue_vue_type_script_setup_true_lang-DS4JR4ch.mjs","sources":["../src/composables/useLinkClasses.ts","../src/components/BLink/BLink.vue"],"sourcesContent":["import {computed, type MaybeRefOrGetter, toValue} from 'vue'\nimport type {\n  LinkIconProps,\n  LinkOpacityProps,\n  LinkUnderlineProps,\n  LinkVariantProps,\n} from '../types/ComponentProps'\n\nexport const useLinkClasses = (\n  linkProps: MaybeRefOrGetter<\n    LinkUnderlineProps & LinkOpacityProps & LinkIconProps & LinkVariantProps\n  >\n) =>\n  computed(() => {\n    const props = toValue(linkProps)\n    return {\n      [`link-${props.variant}`]: props.variant !== null,\n      [`link-opacity-${props.opacity}`]: props.opacity !== undefined,\n      [`link-opacity-${props.opacityHover}-hover`]: props.opacityHover !== undefined,\n      [`link-underline-${props.underlineVariant}`]: props.underlineVariant !== null,\n      [`link-offset-${props.underlineOffset}`]: props.underlineOffset !== undefined,\n      [`link-offset-${props.underlineOffsetHover}-hover`]: props.underlineOffsetHover !== undefined,\n      ['link-underline']:\n        props.underlineVariant === null &&\n        (props.underlineOpacity !== undefined || props.underlineOpacityHover !== undefined),\n      [`link-underline-opacity-${props.underlineOpacity}`]: props.underlineOpacity !== undefined,\n      [`link-underline-opacity-${props.underlineOpacityHover}-hover`]:\n        props.underlineOpacityHover !== undefined,\n      'icon-link': props.icon === true,\n    }\n  })\n","<template>\n  <component\n    :is=\"tag\"\n    v-if=\"tag === 'router-link'\"\n    v-slot=\"//@ts-ignore \n    {href: localHref, navigate, isActive, isExactActive}\"\n    v-bind=\"routerAttr\"\n    custom\n  >\n    <component\n      :is=\"props.routerTag\"\n      :href=\"localHref\"\n      :target=\"props.target\"\n      :class=\"{\n        [defaultActiveClass]: props.active,\n        [props.activeClass]: isActive,\n        [props.exactActiveClass]: isExactActive,\n      }\"\n      v-bind=\"$attrs\"\n      @click=\";[navigate($event), clicked($event)]\"\n    >\n      <slot />\n    </component>\n  </component>\n  <component :is=\"tag\" v-else :class=\"computedLinkClasses\" v-bind=\"routerAttr\" @click=\"clicked\">\n    <slot />\n  </component>\n</template>\n\n<script setup lang=\"ts\">\nimport {useDefaults} from '../../composables/useDefaults'\nimport {useLinkClasses} from '../../composables/useLinkClasses'\nimport type {BLinkProps} from '../../types/ComponentProps'\nimport {collapseInjectionKey, navbarInjectionKey} from '../../utils/keys'\nimport {computed, getCurrentInstance, inject, useAttrs} from 'vue'\n\ndefineSlots<{\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  default?: (props: Record<string, never>) => any\n}>()\n\nconst _props = withDefaults(defineProps<BLinkProps>(), {\n  active: undefined,\n  activeClass: 'router-link-active',\n  disabled: false,\n  exactActiveClass: 'router-link-exact-active',\n  href: undefined,\n  icon: false,\n  opacity: undefined,\n  opacityHover: undefined,\n  // noPrefetch: {type: Boolean, default: false},\n  // prefetch: {type: Boolean, default: null},\n  rel: undefined,\n  replace: false,\n  routerComponentName: 'router-link',\n  routerTag: 'a',\n  stretched: false,\n  target: undefined,\n  to: undefined,\n  underlineOffset: undefined,\n  underlineOffsetHover: undefined,\n  underlineOpacity: undefined,\n  underlineOpacityHover: undefined,\n  underlineVariant: null,\n  variant: null,\n})\nconst props = useDefaults(_props, 'BLink')\n\nconst emit = defineEmits<{\n  click: [value: MouseEvent]\n}>()\n\nconst attrs = useAttrs()\n\nconst collapseData = inject(collapseInjectionKey, null)\nconst navbarData = inject(navbarInjectionKey, null)\n\nconst instance = getCurrentInstance()\n\nconst defaultActiveClass = 'active'\n\nconst tag = computed(() => {\n  const routerName = props.routerComponentName\n    .split('-')\n    .map((e) => e.charAt(0).toUpperCase() + e.slice(1))\n    .join('')\n  const hasRouter = instance?.appContext.app.component(routerName) !== undefined\n  if (!hasRouter || props.disabled || !props.to) {\n    return 'a'\n  }\n  return props.routerComponentName\n})\n\nconst computedHref = computed(() => {\n  const toFallback = '#'\n  if (props.href) return props.href\n\n  if (typeof props.to === 'string') return props.to || toFallback\n\n  const {to} = props\n\n  if (to !== undefined && 'path' in to) {\n    const path = to.path || ''\n    const query = to.query\n      ? `?${Object.keys(to.query)\n          .map((e) => `${e}=${to.query?.[e]}`)\n          .join('=')}`\n      : ''\n    const hash = !to.hash || to.hash.charAt(0) === '#' ? to.hash || '' : `#${to.hash}`\n    return `${path}${query}${hash}` || toFallback\n  }\n  // There is no resolver for `RouteLocationNamedRaw`. Which, I'm not sure there can be one in this context.\n\n  return toFallback\n})\n\n/**\n * Not to be confused with computedLinkClasses\n */\nconst linkValueClasses = useLinkClasses(props)\nconst computedClasses = computed(() => [\n  linkValueClasses.value,\n  {\n    'stretched-link': props.stretched === true,\n  },\n])\n\nconst routerAttr = computed(() => ({\n  'class': computedClasses.value,\n  'to': props.to,\n  'replace': props.replace,\n  'href': computedHref.value,\n  'target': props.target,\n  'rel': props.target === '_blank' ? (props.rel ?? 'noopener') : undefined,\n  'tabindex': props.disabled ? '-1' : typeof attrs.tabindex === 'undefined' ? null : attrs.tabindex,\n  'aria-disabled': props.disabled ? true : null,\n}))\n\nconst computedLinkClasses = computed(() => ({\n  [defaultActiveClass]: props.active,\n  disabled: props.disabled,\n}))\n\nconst clicked = (e: Readonly<MouseEvent>): void => {\n  if (props.disabled) {\n    e.preventDefault()\n    e.stopImmediatePropagation()\n    return\n  }\n\n  if (\n    (collapseData?.isNav?.value === true && navbarData === null) ||\n    (navbarData !== null && navbarData.autoClose?.value === true)\n  ) {\n    collapseData?.hide?.()\n  }\n\n  emit('click', e)\n}\n</script>\n"],"names":[],"mappings":"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"}