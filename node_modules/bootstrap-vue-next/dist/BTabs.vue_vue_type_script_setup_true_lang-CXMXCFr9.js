"use strict";const e=require("vue"),a=require("./useId-D-t4Y3Sk.js"),l=require("./useDefaults-C2groUjC.js"),t=require("./keys-Dkmt9nlW.js"),i=require("./classes-CXBJXuVd.js"),o=require("./useAlignment-BTUJZ_9x.js"),n=require("./index-CnY1um_J.js"),d=e.defineComponent({inheritAttrs:!1,__name:"BTab",props:e.mergeModels({buttonId:{default:void 0},disabled:{type:Boolean,default:!1},id:{default:void 0},lazy:{type:Boolean,default:void 0},lazyOnce:{type:Boolean,default:void 0},noBody:{type:Boolean,default:!1},tag:{default:"div"},title:{default:void 0},titleItemClass:{default:void 0},titleLinkAttrs:{default:void 0},titleLinkClass:{default:void 0}},{active:{type:Boolean,default:!1},activeModifiers:{}}),emits:["update:active"],setup(i){const o=i,n=l.useDefaults(o,"BTab"),d=e.useSlots(),u=e.useModel(i,"active"),s=e.inject(t.tabsInjectionKey,null),v=a.useId((()=>n.id),"tabpane"),r=a.useId((()=>n.buttonId),"tab"),c=e.ref(!1),f=e.ref(null),{onClick:m,...p}=e.useAttrs(),b=e.computed((()=>({id:v.value,buttonId:r.value,disabled:n.disabled,title:n.title,titleComponent:d.title,titleItemClass:()=>n.titleItemClass,titleLinkAttrs:()=>n.titleLinkAttrs,titleLinkClass:()=>n.titleLinkClass,onClick:m,el:f.value})));e.onMounted((()=>{s&&(s.registerTab(b),u.value&&s.activateTab(v.value))})),e.onUnmounted((()=>{s&&s.unregisterTab(v.value)}));const C=e.computed((()=>(null==s?void 0:s.activeId.value)===v.value)),y=e.ref(C.value),k=e.computed((()=>!(!(null==s?void 0:s.lazy.value)&&!(n.lazyOnce??n.lazy)))),B=e.computed((()=>void 0!==n.lazyOnce)),I=e.computed((()=>C.value&&!n.disabled)),g=e.computed((()=>I.value||!k.value||k.value&&B.value&&c.value));e.watch(C,(e=>{if(e)return u.value=!0,void setTimeout((()=>{y.value=!0}),0);y.value=!1,u.value=!1})),e.watch(u,(e=>{s&&(e?s.activateTab(v.value):C.value&&s.activateTab(void 0))}));const h=e.computed((()=>[{active:C.value,show:y.value,"card-body":(null==s?void 0:s.card.value)&&!1===n.noBody,fade:!(null==s?void 0:s.noFade.value)},y.value?null==s?void 0:s.activeTabClass.value:null==s?void 0:s.inactiveTabClass.value,null==s?void 0:s.tabClass.value]));return e.watch(g,(e=>{e&&!c.value&&(c.value=!0)})),(a,l)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(n).tag),e.mergeProps({id:e.unref(v),ref_key:"el",ref:f,class:["tab-pane",h.value],role:"tabpanel","aria-labelledby":e.unref(r)},p),{default:e.withCtx((()=>[g.value?e.renderSlot(a.$slots,"default",{key:0}):e.createCommentVNode("",!0)])),_:3},16,["id","class","aria-labelledby"]))}}),u=["aria-orientation"],s=["id","aria-controls","aria-selected","onClick"],v=e.defineComponent({__name:"BTabs",props:e.mergeModels({activeNavItemClass:{default:void 0},activeTabClass:{default:void 0},align:{default:void 0},card:{type:Boolean,default:!1},contentClass:{default:void 0},end:{type:Boolean,default:!1},fill:{type:Boolean,default:!1},id:{default:void 0},inactiveNavItemClass:{default:void 0},inactiveTabClass:{default:void 0},justified:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},navClass:{default:void 0},navItemClass:{default:void 0},navWrapperClass:{default:void 0},noFade:{type:Boolean,default:!1},noNavStyle:{type:Boolean,default:!1},pills:{type:Boolean,default:!1},small:{type:Boolean,default:!1},tag:{default:"div"},tabClass:{default:void 0},vertical:{type:Boolean,default:!1}},{modelValue:{default:-1},modelModifiers:{},activeId:{default:void 0},activeIdModifiers:{}}),emits:e.mergeModels(["activate-tab","click"],["update:modelValue","update:activeId"]),setup(a,{emit:d}){const v=a,r=l.useDefaults(v,"BTabs"),c=d,f=e.useModel(a,"modelValue"),m=e.useModel(a,"activeId"),p=n.createReusableTemplate(),b=e.ref([]),C=e.computed((()=>b.value.map((a=>{const l=e.unref(a),t=l.id===m.value;return{...l,active:t,navItemClasses:[{active:t,disabled:l.disabled},t?r.activeNavItemClass:r.inactiveNavItemClass,r.navItemClass]}})))),y=e.computed((()=>!((null==C?void 0:C.value)&&C.value.length>0))),k=e.computed((()=>({"d-flex":r.vertical,"align-items-start":r.vertical}))),B=o.useAlignment((()=>r.align)),I=e.computed((()=>({"nav-pills":r.pills,"flex-column me-3":r.vertical,[B.value]:void 0!==r.align,"nav-fill":r.fill,"card-header-tabs":r.card,"nav-justified":r.justified,"nav-tabs":!r.noNavStyle&&!r.pills,small:r.small}))),g=e=>{var a;if(void 0!==e){const l=null==(a=C.value[e])?void 0:a.id;if(e>-1&&e<C.value.length&&!C.value[e].disabled&&(f.value<0||m.value!==l||f.value!==e)){const a=new i.BvEvent("activate-tab",{cancelable:!0});c("activate-tab",e,f.value,a),a.defaultPrevented||(m.value!==l&&(m.value=l),f.value!==e&&(f.value=e))}}},h=e=>{var a,l;C.value.length<=0||(f.value=T(f.value+e,e),null==(l=document.getElementById(null==(a=C.value[f.value])?void 0:a.buttonId))||l.focus())},T=(e,a)=>{let l=e,t=-1,i=-1;for(let o=0;o<C.value.length;o++)C.value[o].disabled||(-1===t&&(t=o),i=o);for(;l>=t&&l<=i&&C.value[l].disabled;)l+=a;return l<t&&(l=t),l>i&&(l=i),l};e.watch(f,((a,l)=>{if(a===l)return;if(C.value.length<=0)return;const t=T(a,a>l?1:-1);e.nextTick((()=>{g(t)}))})),e.watch(m,((e,a)=>{const l=C.value.findIndex((a=>a.id===e));e!==a&&(C.value.length<=0||g(-1!==l?l:T(0,1)))}));e.watch(b,(()=>{N()}),{deep:!0});const N=()=>{var e;if(0===C.value.length)return f.value=-1,void(m.value=void 0);f.value>=0&&!m.value&&(m.value=null==(e=C.value[f.value])?void 0:e.id),C.value.find((e=>e.id===m.value))?g(C.value.findIndex((e=>e.id===m.value))):g(C.value.map((e=>!e.disabled)).indexOf(!0))};return e.provide(t.tabsInjectionKey,{lazy:e.toRef((()=>r.lazy)),card:e.toRef((()=>r.card)),noFade:e.toRef((()=>r.noFade)),activeTabClass:e.toRef((()=>r.activeTabClass)),inactiveTabClass:e.toRef((()=>r.inactiveTabClass)),tabClass:e.toRef((()=>r.tabClass)),registerTab:e=>{b.value.find((a=>a.value.id===e.value.id))?b.value[b.value.findIndex((a=>a.value.id===e.value.id))]=e:b.value.push(e),b.value.sort(((e,a)=>{if(!Node||!e.value.el||!a.value.el)return 0;const l=e.value.el.compareDocumentPosition(a.value.el);return l&Node.DOCUMENT_POSITION_FOLLOWING?-1:l&Node.DOCUMENT_POSITION_PRECEDING?1:0}))},unregisterTab:e=>{b.value=b.value.filter((a=>a.value.id!==e))},activeId:m,activateTab:e=>{const a=C.value.findIndex((a=>a.id===e));g(void 0!==e&&-1!==a?a:T(0,1))}}),(a,l)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(r).tag),{id:e.unref(r).id,class:e.normalizeClass(["tabs",k.value])},{default:e.withCtx((()=>[e.createVNode(e.unref(p).define,null,{default:e.withCtx((()=>[e.createElementVNode("div",{class:e.normalizeClass(["tab-content",e.unref(r).contentClass])},[e.renderSlot(a.$slots,"default"),y.value?(e.openBlock(),e.createElementBlock("div",{key:"bv-empty-tab",class:e.normalizeClass(["tab-pane active",{"card-body":e.unref(r).card}])},[e.renderSlot(a.$slots,"empty")],2)):e.createCommentVNode("",!0)],2)])),_:3}),e.unref(r).end?(e.openBlock(),e.createBlock(e.unref(p).reuse,{key:0})):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass([e.unref(r).navWrapperClass,{"card-header":e.unref(r).card,"ms-auto":a.vertical&&e.unref(r).end}])},[e.createElementVNode("ul",{class:e.normalizeClass(["nav",[I.value,e.unref(r).navClass]]),role:"tablist","aria-orientation":e.unref(r).vertical?"vertical":"horizontal"},[e.renderSlot(a.$slots,"tabs-start"),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(C.value,((a,t)=>{var i,o,n;return e.openBlock(),e.createElementBlock("li",{key:a.id,class:e.normalizeClass(["nav-item",null==(i=a.titleItemClass)?void 0:i.call(a)]),role:"presentation"},[e.createElementVNode("button",e.mergeProps({id:a.buttonId,class:["nav-link",[a.navItemClasses,null==(o=a.titleLinkClass)?void 0:o.call(a)]],role:"tab","aria-controls":a.id,"aria-selected":a.active,ref_for:!0},null==(n=a.titleLinkAttrs)?void 0:n.call(a),{onKeydown:[l[0]||(l[0]=e.withKeys(e.withModifiers((e=>h(-1)),["stop","prevent"]),["left"])),l[1]||(l[1]=e.withKeys(e.withModifiers((e=>h(1)),["stop","prevent"]),["right"])),l[2]||(l[2]=e.withKeys(e.withModifiers((e=>h(-999)),["stop","prevent"]),["page-up"])),l[3]||(l[3]=e.withKeys(e.withModifiers((e=>h(999)),["stop","prevent"]),["page-down"]))],onClick:e.withModifiers((e=>((e,a)=>{var l,t,i;g(a),a>=0&&!C.value[a].disabled&&(null==(l=C.value[a])?void 0:l.onClick)&&"function"==typeof C.value[a].onClick&&(null==(i=(t=C.value[a]).onClick)||i.call(t,e))})(e,t)),["stop","prevent"])}),[a.titleComponent?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(a.titleComponent),{key:0})):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createTextVNode(e.toDisplayString(a.title),1)],64))],16,s)],2)})),128)),e.renderSlot(a.$slots,"tabs-end")],10,u)],2),e.unref(r).end?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(p).reuse,{key:1}))])),_:3},8,["id","class"]))}});exports._sfc_main=d,exports._sfc_main$1=v;
//# sourceMappingURL=BTabs.vue_vue_type_script_setup_true_lang-CXMXCFr9.js.map
